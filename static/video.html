<!DOCTYPE html>
<html lang="en">
<head>
	<title>Test Video</title>
	<style>
		.video-title {
			display: none;
		}
		html, body {
			margin: 0;
			padding: 0;
			font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
			text-align: center;
		}
		video {
			width: 100vw;
			height: 100vh;
			position: absolute;
			left: 0;
		}
	</style>
	<script>
		window.GM_setValue = (key, value) => {
			return localStorage.setItem(key, JSON.stringify(value));
		};
		window.GM_getValue = (key) => {
			const val = localStorage.getItem(key);
			if (val) {
				return JSON.parse(val);
			}
		};
	</script>
</head>
<body>
<span class="video-title">Test Video</span>
<video src="test-video.mp4" controls></video>
<script src="main.js"></script>

<script>
	(function() {
		const isResuming = GM_getValue('maintain-time'),
			timeKey = 'last-video-time',
			lastTime = GM_getValue(timeKey),
			video = document.querySelector('video');

		if (isResuming) {
			video.currentTime = lastTime;
		}
		setInterval(() => {
			GM_setValue(timeKey, video.currentTime);
		}, 50);
	}());
</script>
</body>
</html>
