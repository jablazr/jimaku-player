// ==UserScript==
// @name         字幕プレーヤー
// @namespace    https://github.com/sheodox
// @version      0.5.4
// @description  Study Japanese by using Japanese subtitles on VRV!
// @author       sheodox
// @match        https://static.vrv.co/vilos/player.html*
// @match        https://static.crunchyroll.com/vilos-v2/web/vilos/player.html*
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_setClipboard
// ==/UserScript==

!function(t){var e={};function n(c){if(e[c])return e[c].exports;var s=e[c]={i:c,l:!1,exports:{}};return t[c].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,c){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(n.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(c,s,function(e){return t[e]}.bind(null,s));return c},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=27)}([function(t,e,n){"use strict";function c(){}n.d(e,"a",(function(){return Z})),n.d(e,"b",(function(){return Dt})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return gt})),n.d(e,"e",(function(){return pt})),n.d(e,"f",(function(){return nt})),n.d(e,"g",(function(){return A})),n.d(e,"h",(function(){return r})),n.d(e,"i",(function(){return P})),n.d(e,"j",(function(){return Gt})),n.d(e,"k",(function(){return at})),n.d(e,"l",(function(){return lt})),n.d(e,"m",(function(){return zt})),n.d(e,"n",(function(){return O})),n.d(e,"o",(function(){return m})),n.d(e,"p",(function(){return it})),n.d(e,"q",(function(){return tt})),n.d(e,"r",(function(){return Mt})),n.d(e,"s",(function(){return Ht})),n.d(e,"t",(function(){return Nt})),n.d(e,"u",(function(){return Tt})),n.d(e,"v",(function(){return f})),n.d(e,"w",(function(){return It})),n.d(e,"x",(function(){return Wt})),n.d(e,"y",(function(){return J})),n.d(e,"z",(function(){return z})),n.d(e,"A",(function(){return C})),n.d(e,"B",(function(){return M})),n.d(e,"C",(function(){return Pt})),n.d(e,"D",(function(){return et})),n.d(e,"E",(function(){return d})),n.d(e,"F",(function(){return Lt})),n.d(e,"G",(function(){return St})),n.d(e,"H",(function(){return s})),n.d(e,"I",(function(){return Vt})),n.d(e,"J",(function(){return S})),n.d(e,"K",(function(){return b})),n.d(e,"L",(function(){return L})),n.d(e,"M",(function(){return $})),n.d(e,"N",(function(){return Bt})),n.d(e,"O",(function(){return c})),n.d(e,"P",(function(){return v})),n.d(e,"Q",(function(){return ot})),n.d(e,"R",(function(){return rt})),n.d(e,"S",(function(){return Et})),n.d(e,"T",(function(){return I})),n.d(e,"U",(function(){return y})),n.d(e,"V",(function(){return l})),n.d(e,"W",(function(){return a})),n.d(e,"X",(function(){return W})),n.d(e,"Y",(function(){return V})),n.d(e,"Z",(function(){return G})),n.d(e,"ab",(function(){return H})),n.d(e,"bb",(function(){return B})),n.d(e,"cb",(function(){return T})),n.d(e,"db",(function(){return E})),n.d(e,"eb",(function(){return j})),n.d(e,"fb",(function(){return _})),n.d(e,"gb",(function(){return N})),n.d(e,"hb",(function(){return F})),n.d(e,"ib",(function(){return D})),n.d(e,"jb",(function(){return Jt})),n.d(e,"kb",(function(){return Ct})),n.d(e,"lb",(function(){return qt})),n.d(e,"mb",(function(){return g})),n.d(e,"nb",(function(){return q}));const s=t=>t;function r(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function i(){return Object.create(null)}function l(t){t.forEach(o)}function b(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function u(t){return 0===Object.keys(t).length}function j(t,...e){if(null==t)return c;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function d(t){let e;return j(t,t=>e=t)(),e}function O(t,e,n){t.$$.on_destroy.push(j(e,n))}function f(t,e,n,c){if(t){const s=p(t,e,n,c);return t[0](s)}}function p(t,e,n,c){return t[1]&&c?r(n.ctx.slice(),t[1](c(e))):n.ctx}function g(t,e,n,c,s,r,o){const i=function(t,e,n,c){if(t[2]&&c){const s=t[2](c(n));if(void 0===e.dirty)return s;if("object"==typeof s){const t=[],n=Math.max(e.dirty.length,s.length);for(let c=0;c<n;c+=1)t[c]=e.dirty[c]|s[c];return t}return e.dirty|s}return e.dirty}(e,c,s,r);if(i){const s=p(e,n,c,o);t.p(s,i)}}function m(t){const e={};for(const n in t)e[n]=!0;return e}function h(t){return t&&b(t.destroy)?t.destroy:c}const x="undefined"!=typeof window;let v=x?()=>window.performance.now():()=>Date.now(),y=x?t=>requestAnimationFrame(t):c;const k=new Set;function w(t){k.forEach(e=>{e.c(t)||(k.delete(e),e.f())}),0!==k.size&&y(w)}function $(t){let e;return 0===k.size&&y(w),{promise:new Promise(n=>{k.add(e={c:t,f:n})}),abort(){k.delete(e)}}}function A(t,e){t.appendChild(e)}function S(t,e,n){t.insertBefore(e,n||null)}function z(t){t.parentNode.removeChild(t)}function J(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function C(t){return document.createElement(t)}function _(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function N(t){return document.createTextNode(t)}function T(){return N(" ")}function M(){return N("")}function L(t,e,n,c){return t.addEventListener(e,n,c),()=>t.removeEventListener(e,n,c)}function I(t){return function(e){return e.preventDefault(),t.call(this,e)}}function E(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function P(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function q(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function F(t){return""===t?null:+t}function G(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function H(t,e){t.value=null==e?"":e}function B(t,e,n,c){t.style.setProperty(e,n,c?"important":"")}function W(t,e){for(let n=0;n<t.options.length;n+=1){const c=t.options[n];if(c.__value===e)return void(c.selected=!0)}}function V(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function D(t,e,n){t.classList[n?"add":"remove"](e)}function R(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}class Z{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=C(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)S(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(z)}}const K=new Set;let Y,U=0;function X(t,e,n,c,s,r,o,i=0){const l=16.666/c;let b="{\n";for(let t=0;t<=1;t+=l){const c=e+(n-e)*r(t);b+=100*t+`%{${o(c,1-c)}}\n`}const a=b+`100% {${o(n,1-n)}}\n}`,u=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(a)}_${i}`,j=t.ownerDocument;K.add(j);const d=j.__svelte_stylesheet||(j.__svelte_stylesheet=j.head.appendChild(C("style")).sheet),O=j.__svelte_rules||(j.__svelte_rules={});O[u]||(O[u]=!0,d.insertRule(`@keyframes ${u} ${a}`,d.cssRules.length));const f=t.style.animation||"";return t.style.animation=`${f?f+", ":""}${u} ${c}ms linear ${s}ms 1 both`,U+=1,u}function Q(t,e){const n=(t.style.animation||"").split(", "),c=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),s=n.length-c.length;s&&(t.style.animation=c.join(", "),U-=s,U||y(()=>{U||(K.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),K.clear())}))}function tt(t,e,n,r){if(!e)return c;const o=t.getBoundingClientRect();if(e.left===o.left&&e.right===o.right&&e.top===o.top&&e.bottom===o.bottom)return c;const{delay:i=0,duration:l=300,easing:b=s,start:a=v()+i,end:u=a+l,tick:j=c,css:d}=n(t,{from:e,to:o},r);let O,f=!0,p=!1;function g(){d&&Q(t,O),f=!1}return $(t=>{if(!p&&t>=a&&(p=!0),p&&t>=u&&(j(1,0),g()),!f)return!1;if(p){const e=0+1*b((t-a)/l);j(e,1-e)}return!0}),d&&(O=X(t,0,1,l,i,b,d)),i||(p=!0),j(0,1),g}function et(t){const e=getComputedStyle(t);if("absolute"!==e.position&&"fixed"!==e.position){const{width:n,height:c}=e,s=t.getBoundingClientRect();t.style.position="absolute",t.style.width=n,t.style.height=c,nt(t,s)}}function nt(t,e){const n=t.getBoundingClientRect();if(e.left!==n.left||e.top!==n.top){const c=getComputedStyle(t),s="none"===c.transform?"":c.transform;t.style.transform=`${s} translate(${e.left-n.left}px, ${e.top-n.top}px)`}}function ct(t){Y=t}function st(){if(!Y)throw new Error("Function called outside component initialization");return Y}function rt(t){st().$$.on_mount.push(t)}function ot(t){st().$$.on_destroy.push(t)}function it(){const t=st();return(e,n)=>{const c=t.$$.callbacks[e];if(c){const s=R(e,n);c.slice().forEach(e=>{e.call(t,s)})}}}function lt(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const bt=[],at=[],ut=[],jt=[],dt=Promise.resolve();let Ot=!1;function ft(){Ot||(Ot=!0,dt.then(xt))}function pt(t){ut.push(t)}function gt(t){jt.push(t)}let mt=!1;const ht=new Set;function xt(){if(!mt){mt=!0;do{for(let t=0;t<bt.length;t+=1){const e=bt[t];ct(e),vt(e.$$)}for(ct(null),bt.length=0;at.length;)at.pop()();for(let t=0;t<ut.length;t+=1){const e=ut[t];ht.has(e)||(ht.add(e),e())}ut.length=0}while(bt.length);for(;jt.length;)jt.pop()();Ot=!1,mt=!1,ht.clear()}}function vt(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(pt)}}let yt;function kt(){return yt||(yt=Promise.resolve(),yt.then(()=>{yt=null})),yt}function wt(t,e,n){t.dispatchEvent(R(`${e?"intro":"outro"}${n}`))}const $t=new Set;let At;function St(){At={r:0,c:[],p:At}}function zt(){At.r||l(At.c),At=At.p}function Jt(t,e){t&&t.i&&($t.delete(t),t.i(e))}function Ct(t,e,n,c){if(t&&t.o){if($t.has(t))return;$t.add(t),At.c.push(()=>{$t.delete(t),c&&(n&&t.d(1),c())}),t.o(e)}}const _t={duration:0};function Nt(t,e,n){let r,o,i=e(t,n),l=!1,a=0;function u(){r&&Q(t,r)}function j(){const{delay:e=0,duration:n=300,easing:b=s,tick:j=c,css:d}=i||_t;d&&(r=X(t,0,1,n,e,b,d,a++)),j(0,1);const O=v()+e,f=O+n;o&&o.abort(),l=!0,pt(()=>wt(t,!0,"start")),o=$(e=>{if(l){if(e>=f)return j(1,0),wt(t,!0,"end"),u(),l=!1;if(e>=O){const t=b((e-O)/n);j(t,1-t)}}return l})}let d=!1;return{start(){d||(Q(t),b(i)?(i=i(),kt().then(j)):j())},invalidate(){d=!1},end(){l&&(u(),l=!1)}}}function Tt(t,e,n){let r,o=e(t,n),i=!0;const a=At;function u(){const{delay:e=0,duration:n=300,easing:b=s,tick:u=c,css:j}=o||_t;j&&(r=X(t,1,0,n,e,b,j));const d=v()+e,O=d+n;pt(()=>wt(t,!1,"start")),$(e=>{if(i){if(e>=O)return u(0,1),wt(t,!1,"end"),--a.r||l(a.c),!1;if(e>=d){const t=b((e-d)/n);u(1-t,t)}}return i})}return a.r+=1,b(o)?kt().then(()=>{o=o(),u()}):u(),{end(e){e&&o.tick&&o.tick(1,0),i&&(r&&Q(t,r),i=!1)}}}function Mt(t,e,n,r){let o=e(t,n),i=r?0:1,a=null,u=null,j=null;function d(){j&&Q(t,j)}function O(t,e){const n=t.b-i;return e*=Math.abs(n),{a:i,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function f(e){const{delay:n=0,duration:r=300,easing:b=s,tick:f=c,css:p}=o||_t,g={start:v()+n,b:e};e||(g.group=At,At.r+=1),a||u?u=g:(p&&(d(),j=X(t,i,e,r,n,b,p)),e&&f(0,1),a=O(g,r),pt(()=>wt(t,e,"start")),$(e=>{if(u&&e>u.start&&(a=O(u,r),u=null,wt(t,a.b,"start"),p&&(d(),j=X(t,i,a.b,a.duration,0,b,o.css))),a)if(e>=a.end)f(i=a.b,1-i),wt(t,a.b,"end"),u||(a.b?d():--a.group.r||l(a.group.c)),a=null;else if(e>=a.start){const t=e-a.start;i=a.a+a.d*b(t/a.duration),f(i,1-i)}return!(!a&&!u)}))}return{run(t){b(o)?kt().then(()=>{o=o(),f(t)}):f(t)},end(){d(),a=u=null}}}const Lt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function It(t,e){t.d(1),e.delete(t.key)}function Et(t,e){Ct(t,1,1,()=>{e.delete(t.key)})}function Pt(t,e){t.f(),Et(t,e)}function qt(t,e,n,c,s,r,o,i,l,b,a,u){let j=t.length,d=r.length,O=j;const f={};for(;O--;)f[t[O].key]=O;const p=[],g=new Map,m=new Map;for(O=d;O--;){const t=u(s,r,O),i=n(t);let l=o.get(i);l?c&&l.p(t,e):(l=b(i,t),l.c()),g.set(i,p[O]=l),i in f&&m.set(i,Math.abs(O-f[i]))}const h=new Set,x=new Set;function v(t){Jt(t,1),t.m(i,a),o.set(t.key,t),a=t.first,d--}for(;j&&d;){const e=p[d-1],n=t[j-1],c=e.key,s=n.key;e===n?(a=e.first,j--,d--):g.has(s)?!o.has(c)||h.has(c)?v(e):x.has(s)?j--:m.get(c)>m.get(s)?(x.add(c),v(e)):(h.add(s),j--):(l(n,o),j--)}for(;j--;){const e=t[j];g.has(e.key)||l(e,o)}for(;d;)v(p[d-1]);return p}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let Ft;function Gt(t,e,n){const c=t.$$.props[e];void 0!==c&&(t.$$.bound[c]=n,n(t.$$.ctx[c]))}function Ht(t){t&&t.c()}function Bt(t,e,n){const{fragment:c,on_mount:s,on_destroy:r,after_update:i}=t.$$;c&&c.m(e,n),pt(()=>{const e=s.map(o).filter(b);r?r.push(...e):l(e),t.$$.on_mount=[]}),i.forEach(pt)}function Wt(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Vt(t,e,n,s,r,o,b=[-1]){const a=Y;ct(t);const u=e.props||{},j=t.$$={fragment:null,ctx:null,props:o,update:c,not_equal:r,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:i(),dirty:b,skip_bound:!1};let d=!1;if(j.ctx=n?n(t,u,(e,n,...c)=>{const s=c.length?c[0]:n;return j.ctx&&r(j.ctx[e],j.ctx[e]=s)&&(!j.skip_bound&&j.bound[e]&&j.bound[e](s),d&&function(t,e){-1===t.$$.dirty[0]&&(bt.push(t),ft(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n}):[],j.update(),d=!0,l(j.before_update),j.fragment=!!s&&s(j.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);j.fragment&&j.fragment.l(t),t.forEach(z)}else j.fragment&&j.fragment.c();e.intro&&Jt(t.$$.fragment),Bt(t,e.target,e.anchor),xt()}ct(a)}"function"==typeof HTMLElement&&(Ft=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){Wt(this,1),this.$destroy=c}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!u(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class Dt{$destroy(){Wt(this,1),this.$destroy=c}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!u(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o}));var c=n(0);n.d(e,"b",(function(){return c.E}));const s=[];function r(t,e){return{subscribe:o(t,e).subscribe}}function o(t,e=c.O){let n;const r=[];function o(e){if(Object(c.W)(t,e)&&(t=e,n)){const e=!s.length;for(let e=0;e<r.length;e+=1){const n=r[e];n[1](),s.push(n,t)}if(e){for(let t=0;t<s.length;t+=2)s[t][0](s[t+1]);s.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(s,i=c.O){const l=[s,i];return r.push(l),1===r.length&&(n=e(o)||c.O),s(t),()=>{const t=r.indexOf(l);-1!==t&&r.splice(t,1),0===r.length&&(n(),n=null)}}}}function i(t,e,n){const s=!Array.isArray(t),o=s?[t]:t,i=e.length<2;return r(n,t=>{let n=!1;const r=[];let l=0,b=c.O;const a=()=>{if(l)return;b();const n=e(s?r[0]:r,t);i?t(n):b=Object(c.K)(n)?n:c.O},u=o.map((t,e)=>Object(c.eb)(t,t=>{r[e]=t,l&=~(1<<e),n&&a()},()=>{l|=1<<e}));return n=!0,a(),function(){Object(c.V)(u),b()}})}},function(t,e,n){"use strict";n.d(e,"g",(function(){return i})),n.d(e,"e",(function(){return l})),n.d(e,"d",(function(){return b})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return j})),n.d(e,"f",(function(){return d}));var c=n(1);const s={subtitleFallbackColor:"#FFFFFF",showSubtitlesOnVideo:!0,pauseWhenTrayOpen:!0,invertVerticalAlignment:!0,autoCopySubtitles:!1,globalFontScale:1,subtitleClickAction:"jisho"},r=Object.assign({},s,GM_getValue("settings-store",{})),o={};Object.keys(s).forEach(t=>{(o[t]=Object(c.d)(r[t])).subscribe(e=>{r[t]=e,GM_setValue("settings-store",r)})});const i=o.subtitleFallbackColor,l=o.showSubtitlesOnVideo,b=o.pauseWhenTrayOpen,a=o.invertVerticalAlignment,u=o.autoCopySubtitles,j=o.globalFontScale,d=o.subtitleClickAction},function(t,e,n){"use strict";var c=n(0);n.d(e,"a",(function(){return c.p})),n.d(e,"b",(function(){return c.Q})),n.d(e,"c",(function(){return c.R}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return j})),n.d(e,"f",(function(){return f})),n.d(e,"h",(function(){return p})),n.d(e,"c",(function(){return g}));var c=n(1);const s=()=>"last-used-alignment-"+o,r=()=>"alignment-history-"+o;let o="";const i=Object(c.d)(null),l=Object(c.d)(!1),b=Object(c.d)([]),a=Object(c.a)(b,t=>t.slice(1)),u=Object(c.d)("");u.subscribe(t=>{o=t;const e=GM_getValue(s());b.set(GM_getValue(r(),[])),i.set(e),l.set("number"==typeof e)}),i.subscribe(t=>{GM_setValue(s(),t),l.set("number"==typeof t)});const j=t=>{null!==t&&b.update((e=[])=>[d(t),...e.filter(e=>e.alignment!==t)].slice(0,5))};function d(t){return{alignment:t,signed:O(t)}}function O(t){const e=parseFloat((t/1e3).toFixed(2));return e>0?"+"+e:e}b.subscribe(t=>{GM_setValue(r(),t)});const f=Object(c.a)(i,t=>parseFloat((t/1e3).toFixed(2))),p=Object(c.a)(i,t=>O(t)),g=Object(c.a)(f,t=>0===t?"no adjustment":t>0?`delayed by ${t} seconds`:`hastened by ${Math.abs(t)} seconds`)},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return b})),n.d(e,"c",(function(){return a}));var c=n(1),s=n(2),r=n(7),o=n(9);function i(t){return t.filter(t=>!!t).join(";")}const l=Object(c.a)([s.b,r.b,r.a],([t,e,n])=>e&&n.overrideGlobalFontScale?n.fontScale:t),b=Object(c.a)(s.f,t=>["jisho","copy"].includes(t));function a(t){t=t.trim();switch(Object(c.b)(s.f)){case"jisho":window.open("https://jisho.org/search/"+encodeURIComponent(t)),o.a.addPauser("define");break;case"copy":const e=document.createElement("input");document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),e.remove()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r}));var c=n(0);function s(t){return t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1}function r(t){const e=t-1;return e*e*e+1}n.d(e,"c",(function(){return c.H}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));var c=n(1),s=n(4);function r(t){return"show-based-settings-"+t}const o=Object(c.a)(s.g,t=>!!t),i=Object(c.d)({});let l=!1;i.subscribe(t=>{if(!l){const e=Object(c.b)(s.g);GM_setValue(r(e),t)}}),s.g.subscribe(t=>{const e={overrideGlobalFontScale:!1,fontScale:1};l=!0,i.set({...e,...GM_getValue(r(t),{})}),l=!1})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r}));var c=n(6);n(0);function s(t,{delay:e=0,duration:n=400,easing:s=c.c}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:s,css:t=>"opacity: "+t*r}}function r(t,{delay:e=0,duration:n=400,easing:s=c.b,x:r=0,y:o=0,opacity:i=0}){const l=getComputedStyle(t),b=+l.opacity,a="none"===l.transform?"":l.transform,u=b*(1-i);return{delay:e,duration:n,easing:s,css:(t,e)=>`\n\t\t\ttransform: ${a} translate(${(1-t)*r}px, ${(1-t)*o}px);\n\t\t\topacity: ${b-u*e}`}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));const c=new class{constructor(){this.video=null,this.reasons=[]}setVideo(t){this.reasons=[],this.video=t}addPauser(t){this.reasons.includes("user-paused")&&!this.video.paused&&this.reasons.splice(this.reasons.indexOf("user-paused")),0===this.reasons.length&&this.video.paused&&this.reasons.push("user-paused"),this.reasons.includes(t)||this.reasons.push(t),this._checkPause()}removePauser(t){const e=this.reasons.indexOf(t);-1!==e&&(this.reasons.splice(e,1),this._checkPause())}_checkPause(){this.reasons.length?this.video.pause():this.video.play()}}},,function(t,e){const n=t=>Object.assign({},t);t.exports=class{constructor(t,e){this.format=t,this.fileName=e,this.subs=[],this.generatedIdBase=0}genId(){return"generated-id-"+this.generatedIdBase++}getSubs(t){return this.subs.filter(e=>e.start<=t&&e.end>=t)}timeToMs(t){const[e,n,c]=t.split(":");return 36e5*+e+6e4*+n+1e3*parseFloat(c)}prettyTimeDifference(t,e){return`+${parseFloat(((e-t)/1e3).toFixed(1))} seconds`}getAlignmentCandidates(t){let e=this.subs;return e.sort((t,e)=>t.start-e.end),t?e.reduce((c,s,r)=>{if(s.text.includes(t)){const t=r+1,o=e.slice(t,t+3).map(n).map(t=>(t.offset=this.prettyTimeDifference(s.start,t.start),t));c.push({type:"search-match",sub:s,subsequent:o})}return c},[]).slice(0,5):e.slice(0,20).map(n).map(t=>(t.offset=this.prettyTimeDifference(e[0].start,t.start),t))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r}));var c=n(1);const s=Object(c.c)(0,t=>{let e;return function n(){e=requestAnimationFrame(n);const c=document.querySelector("video");c&&t(c.currentTime)}(),()=>{cancelAnimationFrame(e)}}),r=Object(c.d)(!0);let o;function i(){r.set(!0),clearTimeout(o),o=setTimeout(()=>{r.set(!1)},2500)}document.addEventListener("keydown",i),document.addEventListener("mousemove",i)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var c=n(11),s=n.n(c);const r={"line-left":"0%",center:"-50%","line-right":"-100%"};class o extends s.a{constructor(t,e){super("subrip",e);const n=Date.now();this.parse(t),this.parseTime=Date.now()-n}parse(t){const e=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n\n");this.subs=e.reduce((t,e)=>{let n=e.trim().split("\n");function c(){n.shift()}try{/^\d*$/.test(n[0])&&c();let[e,s]=n[0].replace(/,/g,".").match(/^([\d:\.\-> ]*)/)[0].split(/\-\->/),o=n[0].match(/([a-zA-Z].*)/);o=o&&o.length?o[1]:"";let i=[];const l=n.length-1,b=(t,e)=>{const n=o.match(new RegExp(t+":([-\\d\\.]*)%?"));return n?n[1]:e},a=(t,e)=>{const n=o.match(new RegExp(t+":([\\d\\.]*)%"));return n?parseInt(n[1],10):e},u=t=>{const e=o.match(new RegExp(t+":([w-]*?)"));if(e)return e[1]},j=()=>{const t=o.match(/position:([\d.]*)%(?:,(\w*))?/);return t?{position:parseInt(t[1]),positionAlignment:"middle"===t[2]?"center":t[2]}:{position:50,positionAlignment:"center"}};let{position:d,positionAlignment:O="center"}=j(),f=(u("align"),b("line",100)),p=a("size",null);const g={[f]:f,"-1":100,0:0}[f];i.push(`left: ${d}vw`);const m=`translateX(${r[O]})`;i.push("width: "+(p?p+"vw":"max-content")),c();const h=n.join("\n").replace(/<\/?c.Japanese>/g,""),x=l*1,v=`transform: ${m} `+(g>75?"translateY(-100%)":""),y=`transform: translateY(${g>75?"0%":"-100%"}) ${m}`,k="calc(100vh - 100px)",w=100-x+"vh",$=(t,e)=>`top: clamp(${x}vh, ${t}vh, ${e});`;t.push({_id:this.genId(),start:this.timeToMs(e),end:this.timeToMs(s),verticalAlignment:{normal:{inactive:`${$(g,w)} ${v}`,active:`${$(g,k)} ${v}`},inverted:{inactive:`${$(100-g,w)} ${y}`,active:`${$(100-g,k)} ${y}`}},text:h,inline:i.join("; ")})}catch(t){}return t},[])}serialize(t){return JSON.stringify("number"==typeof t?this.getSubs(t):this.subs,null,4)}debugInfo(){return[{title:"Number of subtitles",detail:this.subs.length}]}}},,,,,function(t,e,n){"use strict";var c=n(0),s=n(5),r=n(2),o=n(12);function i(t,e,n){const c=t.slice();return c[10]=e[n],c}function l(t){let e,n=[],s=new Map,r=t[3];const o=t=>t[10]._id;for(let e=0;e<r.length;e+=1){let c=i(t,r,e),l=o(c);s.set(l,n[e]=b(l,c))}return{c(){for(let t=0;t<n.length;t+=1)n[t].c();e=Object(c.B)()},m(t,s){for(let e=0;e<n.length;e+=1)n[e].m(t,s);Object(c.J)(t,e,s)},p(t,r){if(56&r){const l=t[3];n=Object(c.lb)(n,r,o,1,t,l,s,e.parentNode,c.w,b,e,i)}},d(t){for(let e=0;e<n.length;e+=1)n[e].d(t);t&&Object(c.z)(e)}}}function b(t,e){let n,s,r,o,i,l,b,a,u=e[10].text+"";function j(...t){return e[6](e[10],...t)}return{key:t,first:null,c(){n=Object(c.A)("p"),s=Object(c.gb)(u),r=Object(c.cb)(),Object(c.i)(n,"style",o=e[5](e[10],e[4])),Object(c.i)(n,"data-sub-style",i=e[10].style),Object(c.i)(n,"data-sub-id",l=e[10]._id),Object(c.i)(n,"title","click to search this phrase on Jisho.org"),Object(c.i)(n,"class","svelte-1ex8gth"),this.first=n},m(t,e){Object(c.J)(t,n,e),Object(c.g)(n,s),Object(c.g)(n,r),b||(a=Object(c.L)(n,"click",j),b=!0)},p(t,r){e=t,8&r&&u!==(u=e[10].text+"")&&Object(c.Z)(s,u),24&r&&o!==(o=e[5](e[10],e[4]))&&Object(c.i)(n,"style",o),8&r&&i!==(i=e[10].style)&&Object(c.i)(n,"data-sub-style",i),8&r&&l!==(l=e[10]._id)&&Object(c.i)(n,"data-sub-id",l)},d(t){t&&Object(c.z)(n),b=!1,a()}}}function a(t){let e,n=t[2]&&l(t);return{c(){e=Object(c.A)("div"),n&&n.c(),Object(c.i)(e,"class","subtitles svelte-1ex8gth"),Object(c.ib)(e,"non-actionable",!t[1])},m(t,s){Object(c.J)(t,e,s),n&&n.m(e,null)},p(t,[s]){t[2]?n?n.p(t,s):(n=l(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),2&s&&Object(c.ib)(e,"non-actionable",!t[1])},i:c.O,o:c.O,d(t){t&&Object(c.z)(e),n&&n.d()}}}function u(t,e,n){let i,l,b,a,u,j,d,O=c.O,f=()=>(O(),O=Object(c.eb)(p,t=>n(3,j=t)),p);Object(c.n)(t,r.g,t=>n(7,i=t)),Object(c.n)(t,s.a,t=>n(8,l=t)),Object(c.n)(t,r.c,t=>n(9,b=t)),Object(c.n)(t,s.d,t=>n(1,a=t)),Object(c.n)(t,r.e,t=>n(2,u=t)),Object(c.n)(t,o.b,t=>n(4,d=t)),t.$$.on_destroy.push(()=>O());let{subtitles:p}=e;f();return t.$$set=t=>{"subtitles"in t&&f(n(0,p=t.subtitles))},[p,a,u,j,d,function(t,e){let n=["color: "+i,`font-size: ${5*l}vh`];return t.verticalAlignment&&n.push(t.verticalAlignment[b?"inverted":"normal"][e?"active":"inactive"]),n=n.concat([t.inline||""]),Object(s.b)(n)},t=>Object(s.c)(t.text)]}class j extends c.b{constructor(t){var e;super(),document.getElementById("svelte-1ex8gth-style")||((e=Object(c.A)("style")).id="svelte-1ex8gth-style",e.textContent='p.svelte-1ex8gth{position:fixed;color:white;margin:0;padding:0;white-space:pre-line;text-align:center;max-width:100vw;font-family:"Source Han Sans", "源ノ角ゴシック", "Hiragino Sans", "HiraKakuProN-W3", "Hiragino Kaku Gothic ProN W3", "Hiragino Kaku Gothic ProN", "ヒラギノ角ゴ ProN W3", "Noto Sans", "Noto Sans CJK JP", "メイリオ", Meiryo, "游ゴシック", YuGothic, "ＭＳ Ｐゴシック", "MS PGothic", "ＭＳ ゴシック", "MS Gothic", sans-serif;display:block;transition:top 0.1s;text-shadow:-4px -4px 0px rgba(9, 9, 9, 255), -4px -3px 0px rgba(9, 9, 9, 255), -4px -2px 0px rgba(9, 9, 9, 255), -4px -1px 0px rgba(9, 9, 9, 255), -4px 0px 0px rgba(9, 9, 9, 255), -4px 1px 0px rgba(9, 9, 9, 255), -4px 2px 0px rgba(9, 9, 9, 255), -4px 3px 0px rgba(9, 9, 9, 255), -4px 4px 0px rgba(9, 9, 9, 255), -3px -4px 0px rgba(9, 9, 9, 255), -3px -3px 0px rgba(9, 9, 9, 255), -3px -2px 0px rgba(9, 9, 9, 255), -3px -1px 0px rgba(9, 9, 9, 255), -3px 0px 0px rgba(9, 9, 9, 255), -3px 1px 0px rgba(9, 9, 9, 255), -3px 2px 0px rgba(9, 9, 9, 255), -3px 3px 0px rgba(9, 9, 9, 255), -3px 4px 0px rgba(9, 9, 9, 255), -2px -4px 0px rgba(9, 9, 9, 255), -2px -3px 0px rgba(9, 9, 9, 255), -2px -2px 0px rgba(9, 9, 9, 255), -2px -1px 0px rgba(9, 9, 9, 255), -2px 0px 0px rgba(9, 9, 9, 255), -2px 1px 0px rgba(9, 9, 9, 255), -2px 2px 0px rgba(9, 9, 9, 255), -2px 3px 0px rgba(9, 9, 9, 255), -2px 4px 0px rgba(9, 9, 9, 255), -1px -4px 0px rgba(9, 9, 9, 255), -1px -3px 0px rgba(9, 9, 9, 255), -1px -2px 0px rgba(9, 9, 9, 255), -1px -1px 0px rgba(9, 9, 9, 255), -1px 0px 0px rgba(9, 9, 9, 255), -1px 1px 0px rgba(9, 9, 9, 255), -1px 2px 0px rgba(9, 9, 9, 255), -1px 3px 0px rgba(9, 9, 9, 255), -1px 4px 0px rgba(9, 9, 9, 255), 0px -4px 0px rgba(9, 9, 9, 255), 0px -3px 0px rgba(9, 9, 9, 255), 0px -2px 0px rgba(9, 9, 9, 255), 0px -1px 0px rgba(9, 9, 9, 255), 0px 0px 0px rgba(9, 9, 9, 255), 0px 1px 0px rgba(9, 9, 9, 255), 0px 2px 0px rgba(9, 9, 9, 255), 0px 3px 0px rgba(9, 9, 9, 255), 0px 4px 0px rgba(9, 9, 9, 255), 1px -4px 0px rgba(9, 9, 9, 255), 1px -3px 0px rgba(9, 9, 9, 255), 1px -2px 0px rgba(9, 9, 9, 255), 1px -1px 0px rgba(9, 9, 9, 255), 1px 0px 0px rgba(9, 9, 9, 255), 1px 1px 0px rgba(9, 9, 9, 255), 1px 2px 0px rgba(9, 9, 9, 255), 1px 3px 0px rgba(9, 9, 9, 255), 1px 4px 0px rgba(9, 9, 9, 255), 2px -4px 0px rgba(9, 9, 9, 255), 2px -3px 0px rgba(9, 9, 9, 255), 2px -2px 0px rgba(9, 9, 9, 255), 2px -1px 0px rgba(9, 9, 9, 255), 2px 0px 0px rgba(9, 9, 9, 255), 2px 1px 0px rgba(9, 9, 9, 255), 2px 2px 0px rgba(9, 9, 9, 255), 2px 3px 0px rgba(9, 9, 9, 255), 2px 4px 0px rgba(9, 9, 9, 255), 3px -4px 0px rgba(9, 9, 9, 255), 3px -3px 0px rgba(9, 9, 9, 255), 3px -2px 0px rgba(9, 9, 9, 255), 3px -1px 0px rgba(9, 9, 9, 255), 3px 0px 0px rgba(9, 9, 9, 255), 3px 1px 0px rgba(9, 9, 9, 255), 3px 2px 0px rgba(9, 9, 9, 255), 3px 3px 0px rgba(9, 9, 9, 255), 3px 4px 0px rgba(9, 9, 9, 255), 4px -4px 0px rgba(9, 9, 9, 255), 4px -3px 0px rgba(9, 9, 9, 255), 4px -2px 0px rgba(9, 9, 9, 255), 4px -1px 0px rgba(9, 9, 9, 255), 4px 0px 0px rgba(9, 9, 9, 255), 4px 1px 0px rgba(9, 9, 9, 255), 4px 2px 0px rgba(9, 9, 9, 255), 4px 3px 0px rgba(9, 9, 9, 255), 4px 4px 0px rgba(9, 9, 9, 255), 2px 2px 0px rgba(20, 20, 20, 195)}p.svelte-1ex8gth:hover{cursor:pointer;color:#0aff8c !important}.non-actionable.svelte-1ex8gth{pointer-events:none}',Object(c.g)(document.head,e)),Object(c.I)(this,t,u,a,c.W,{subtitles:0})}}e.a=j},,,function(t,e,n){const c=n(11),s=t=>(t.charAt(0).toLowerCase()+t.substring(1)).replace(" ",""),r={1:1,2:2,3:3,5:7,6:8,7:9,9:4,10:5,11:6};function o(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}const i=t=>{if(t){t=(t=t.replace(/[&H]/g,"").replace(/[^0-9A-F]/g,"")).padStart(8,"0");const[e,n,c,s,r]=t.match(/([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})/i),o=t=>parseInt(t,16);return{rgba:`rgba(${o(r)}, ${o(s)}, ${o(c)}, ${((255-o(n))/255).toFixed(3)})`,weakenAlpha:t=>`rgba(${o(r)}, ${o(s)}, ${o(c)}, ${(t*((255-o(n))/255)).toFixed(3)})`}}},l=t=>{if(!t)return null;const e=[],n=/([mnlbspc][ \.0-9\-]+)/g;for(const c of t.match(n)){const[t,...n]=c.trim().split(" ");e.push({command:t,coordinates:n.map(parseFloat)})}const c=-1*e.reduce((t,{coordinates:e})=>Math.min(t,...e),0);return e.forEach(t=>{t.coordinates=t.coordinates.map(t=>t+c)}),e},b=(t,e,n="transparent",c=0,s=0)=>{const r=t||n,o=s<1?r.rgba:r.weakenAlpha(1/(4*e));s+="px";let i=[];for(let t=-1*(e=void 0===e?1:parseInt(e,10));t<=e;t++)for(let n=-1*e;n<=e;n++)i.push(`${t}px ${n}px ${s} ${o}`);return 0===e&&(i=["none"]),`text-shadow: ${i.join(", ")}; filter: drop-shadow(${c}px ${c}px ${s} ${n.rgba})`},a=t=>`font-family: "${t}", "Source Han Sans", "源ノ角ゴシック", "Hiragino Sans", "HiraKakuProN-W3", "Hiragino Kaku Gothic ProN W3", "Hiragino Kaku Gothic ProN", "ヒラギノ角ゴ ProN W3", "Noto Sans", "Noto Sans CJK JP", "メイリオ", Meiryo, "游ゴシック", YuGothic, "ＭＳ Ｐゴシック", "MS PGothic", "ＭＳ ゴシック", "MS Gothic", sans-serif`;const u=t=>parseInt(t,10),j=[{tag:"t",friendly:"animatedTransform",complex:!0,repeatable:!0},{tag:"move",friendly:"movement",complex:!0,parser:parseFloat},{tag:"clip",friendly:"clip",complex:!0,parser:t=>{if(4===t.length);else{const[e,n]=1===t.length?[1,t[0]]:t,c=l(n);if(c)return{scale:e,commands:c}}},parseTogether:!0},{tag:"3c",friendly:"outlineColor",parser:i},{tag:"4c",friendly:"shadowColor",parser:i},{tag:"bord",friendly:"outlineSize"},{tag:"shad",friendly:"shadowDepth"},{tag:"blur",friendly:"blur"},{tag:"be",friendly:"blur"},{tag:"pos",friendly:"position",complex:!0,parser:u},{tag:"an",friendly:"alignment"},{tag:"org",friendly:"origin",complex:!0},{tag:"fscx",friendly:"fontScaleX"},{tag:"fscy",friendly:"fontScaleY"},{tag:"frx",friendly:"rotateX"},{tag:"fry",friendly:"rotateY"},{tag:"frz",friendly:"rotateZ"},{tag:"fad",friendly:"fade",complex:!0,parser:u},{tag:"fsp",friendly:"letterSpacing"},{tag:"fs",friendly:"fontSize"},{tag:"u",friendly:"underline"},{tag:"s",friendly:"strikethrough"},{tag:"b",friendly:"bold",parser:u},{tag:"i",friendly:"italic",parser:u},{tag:"fn",friendly:"fontName"},{tag:"1c",friendly:"color",parser:i},{tag:"c",friendly:"color",parser:i},{tag:"r",friendly:"reset",defaultValue:!1},{tag:"q",friendly:"wrapStyle"},{tag:"p",friendly:"drawMode"},{tag:"a",friendly:"alignment",parser:t=>r[t]}];function d(t,e,n=!1){return e?n?e(t):Array.isArray(t)?t.map(e):e(t):t}function O(t){const e=t,n=t.replace(/{.*?}/g,""),c={},s={};let[r]=t.match(/{.*?}/);for(const{tag:t,friendly:e,complex:n=!1,defaultValue:o,parser:i,repeatable:l=!1,parseTogether:b}of j){let a=f(r,t,n),u=0;for(;!l&&0===u||l&&a;){if(a){r=a.overrides;const n=d(a.params,i,b)||o;c[e]=l?[...c[e]||[],n]:n,s[t]=l?[...s[t]||[],a.params]:a.params}a=f(r,t,n),u++}}return{text:n,rawText:e,overrides:c,rawOverrides:s}}function f(t,e,n=!1){if(n){const n=t.match(`\\\\${e}\\((.*)`);if(!n)return;let s=[],r="",o="",i=!1;const l=n[1];for(let n=0;n<l.length&&t;n++){const b=l[n];function c(){o+=b,r+=b}if("("===b)c(),i=!0;else if(i||","!==b&&")"!==b)i&&")"===b?(c(),i=!1):c();else if(s.push(o),r+=b,o="",")"===b)return{overrides:t.replace(`\\${e}(`+r,""),params:s}}}const s=new RegExp(`\\\\${e}([^\\\\}]*)`),r=t.match(s);if(r)return{overrides:t.replace(r[0],""),params:r[1]}}t.exports={getOverride:f,ASS:class extends c{constructor(t,e){super("ass",e);const n=Date.now();t=t.replace(/\r\n/g,"\n");try{this.blocks=this.parseBlocks(t),this.subs=this.parseBlock(this.blocks.subs),this.parseInfo(this.blocks.info),this.parseSubTimings(),this.parseStyles(this.parseBlock(this.blocks.styles)),this.parseSubOverrideTags()}catch(t){console.error("[Jimaku Player] ASS parse error",t),this.parsingSub&&console.error("[Jimaku Player] Error occurred parsing this line",this.parsingSub),this.subs=[]}this.parseTime=Date.now()-n}serialize(t){let e=this.subs,n=this.styles;if("number"==typeof t){e=this.getSubs(t),n={};for(const{style:t}of e)n[t]=this.styles[t]}return JSON.stringify({info:this.info,styles:n,subs:e},null,4)}debugInfo(){return[{title:"Number of styles",detail:Object.keys(this.styles).length},{title:"Number of subtitles",detail:this.subs.length}]}parseInfo(){this.info={},this.blocks.info.split("\n").forEach(t=>{const[e,n]=t.split(/: ?/);this.info[s(e)]=n})}scaleHeight(t,e=!1){const n=t/+this.info.playResY*100;return e?n:n+"vh"}scaleWidth(t){return t/+this.info.playResX*100+"vw"}parseBlocks(t){const e=t.split(/\n(?=\[)/),n=t=>e.find(e=>{e=e.trim();const[n,c]=e.match(/^\[(.*?)]/);return c===t}).replace(/.*\n/,"").trim();return{info:n("Script Info"),styles:n("V4+ Styles"),subs:n("Events")}}parseBlock(t){const[e,...n]=t.split("\n"),c=(t,e=1/0)=>{let[n,c,s]=t.match(/(\w*): (.*)/);return s=s.split(","),s.length>e&&(s[e-1]=s.slice(e-1).join(","),s.splice(e,1/0)),{type:c,attributes:s}},r=c(e);return n.reduce((t,e)=>{if(!e||";"===e.charAt(0)||0===e.indexOf("Comment: "))return t;const n=c(e,r.attributes.length),o={dataType:n.type.toLowerCase()};return r.attributes.forEach((t,e)=>{t=t.trim();const c=s(t);o[c]=n.attributes[e]}),o.style="*Default"===o.style?"Default":o.style,o._id=this.genId(),t.push(o),t},[])}parseSubTimings(){this.subs.forEach(t=>{t.rawStart=t.start,t.rawEnd=t.end,t.start=this.timeToMs(t.start),t.end=this.timeToMs(t.end)})}parseStyles(t){const e={};t.forEach(t=>{for(const e of Object.keys(t).filter(t=>/colour/i.test(t)))t[e]=i(t[e]);t.name="*Default"===t.name?"Default":t.name;const n=[],{primaryColour:c,secondaryColour:s,outlineColour:r,backColour:o,borderStyle:l,outline:u,shadow:j,fontname:d,fontsize:O,bold:f,italic:p,underline:g,strikeOut:m,alignment:h,marginL:x,marginR:v,marginV:y}=t;c&&n.push("color: "+c.rgba),d&&n.push(a(d)),"1"===l?n.push(b(r,u,o,j)):"3"===l&&n.push("background-color: "+o.rgba),"-1"===f&&n.push("font-weight: bold"),"-1"===p&&n.push("font-style: italic"),"-1"!==g&&"-1"!==m||n.push(`text-decoration: ${"-1"===g?"underline":""} ${"-1"===m?"line-through":""}`),e[t.name]={inline:n.join(";"),marginL:this.scaleWidth(x),marginR:this.scaleWidth(v),marginV:this.scaleHeight(y),fontSize:this.genScaledFont(O),raw:t}}),this.styles=e}genScaledFont(t){return this.scaleHeight(.7*t,!0)}parseSubOverrideTags(){this.subs.forEach(t=>{this.parsingSub=JSON.parse(JSON.stringify(t)),t.rawText=t.text,t.text=t.text.replace(/\\n/g," ").replace(/\\N/g,"\n").trim().replace(/\\h/g," ");const e=this.styles[t.style];if(t.mountPoint=e.raw.alignment,!/{.+?}/.test(t.text))return;t.phrases=[];const n=function*(t){const e=/({.*?}[^{]*)/g;let n;const c=t.indexOf("{");for(c>0&&(yield{text:t.substring(0,c),overrides:{}});null!==(n=e.exec(t));)yield O(n[1])}(t.text);let c=[];for(const s of n){const n=[],r={_id:this.genId(),text:s.text,fadeIn:0,fadeOut:0,inline:"",overrides:s.overrides,rawOverrides:s.rawOverrides,rawText:s.rawText,html:""},{overrides:o}=s;if(o.outlineColor||o.shadowColor||o.outlineSize||o.shadowDepth||o.blur){const e=this.styles[t.style];if(e){const t=o.outlineColor||e.raw.outlineColour,n=o.shadowColor||e.raw.backColour,s=o.outlineSize||e.raw.outline,r=o.shadowDepth||e.raw.shadow;c.push(b(t,s,n,r,o.blur))}}let i=[];if(o.position||o.movement){if(t.mountPoint="positioned",o.position){const[t,e]=o.position;n.push(`position: fixed; left: ${this.scaleWidth(t)}; top: ${this.scaleHeight(e)}`)}else if(o.movement){const[e,n,c,s,...r]=o.movement;t.movement={x1:this.scaleWidth(e),y1:this.scaleHeight(n),x2:this.scaleWidth(c),y2:this.scaleHeight(s),timings:r.every(t=>0===t)?[]:r}}n.push("white-space: pre");const s={1:"0, -100%",2:"-50%, -100%",3:"-100%, -100%",4:"0, -50%",5:"-50%, -50%",6:"-100%, -50%",7:"0, 0",8:"-50%, 0",9:"-100%, 0"}[o.alignment||e.raw.alignment];if(n.push(`transform: translate(${s})`),o.origin){const[t,e]=o.origin;c.push(`transform-origin: ${this.scaleWidth(t)} ${this.scaleHeight(e)}`)}}else o.alignment&&(t.mountPoint=o.alignment);const{fontScaleX:l,fontScaleY:u}=o;l&&i.push(`scaleX(${l}%)`),u&&i.push(`scaleY(${u}%)`);const j=[],d=(t,e,n=1)=>{if(void 0!==t)return t=parseFloat(t)*n,j.push(`${e}(${t}deg)`)};d(o.rotateY,"rotateY"),d(o.rotateX,"rotateX"),d(o.rotateZ,"rotateZ",-1),j.length&&(i.push("perspective(200px)"),i.push(j.join(" "))),i.length&&(c.push("display: inline-block"),c.push("transform: "+i.join(" "))),o.fade&&(r.fadeIn=o.fade[0],r.fadeOut=o.fade[1],t.end-=r.fadeOut),o.letterSpacing&&c.push(`letter-spacing: ${o.letterSpacing}px`),o.fontSize&&(r.fontSize=this.genScaledFont(o.fontSize));const O=[];o.underline&&O.push("underline"),o.strikethrough&&O.push("line-through"),O.length&&c.push("text-decoration: "+(O.length?O.join(" "):"none"));const{bold:f,italic:p}=o;if(void 0!==f){const t={[f]:f,1:"bold",0:"normal"};c.push("font-weight: "+t[f])}if("number"==typeof p&&c.push("font-style: "+(p?"italic":"normal")),o.fontName&&c.push(a(o.fontName)),o.color&&c.push("color: "+o.color.rgba),o.reset){c=[this.styles[o.reset].inline]}else!1===o.reset&&(c=[]);if("1"===o.drawMode){const t=this.draw(r.text,o,e);r.html+=t.html,r.drawCommands=t.commands,r.text="",n.push("pointer-events: none"),o.blur&&c.push(`filter: blur(${o.blur}px)`)}if(o.clip){const{html:t,clipId:e}=this.clip(o.clip,r._id);c.push(`clip-path: url(#${e})`),r.html+=t}r.inline=c.join(";"),t.phrases.push(r),n.length&&(t.inline=n.join(";"))}t.text=t.text.replace(/{.*?}/g,"")}),this.parsingSub=null}genSvg(t,e=1){const n=function(){const t=o("svg");return t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t}(),c=o("path"),{path:s,maxHeight:r,maxWidth:i,viewBox:l}=(t=>{let e=[],n=0,c=0;function s(t,e){n=Math.max(n,t),c=Math.max(c,e)}function r(t,n,c,s){const r=[],o=n.slice();for(;o.length>0;){const e=o.splice(0,c);s&&s(...e),r.push(t+" "+e.join(" "))}e=e.concat(r)}for(let{command:n,coordinates:c}of t)"m"===n&&e.length>0&&e.push(" Z "),"n"===n&&(n="m"),"l"===n?r("L",c,2,s):"m"===n?(e.push("M"+c.join(" ")),s(...c)):"b"===n&&r("C",c,6,(t,e,n,c,r,o)=>{s(t,e),s(n,c),s(r,o)});return{path:e.join(" "),viewBox:`0 0 ${n} ${c}`,maxHeight:c,maxWidth:n}})(t);return n.setAttribute("viewBox",l),c.setAttribute("d",s),n.setAttribute("width",this.scaleWidth(i)),n.setAttribute("height",this.scaleHeight(r)),{svg:n,path:c}}clip({scale:t,commands:e},n){const{svg:c,path:s}=this.genSvg(e,t),r=o("defs"),i=o("clipPath"),l="clip-path-"+n;return i.setAttribute("id",l),c.appendChild(r),r.appendChild(i),i.appendChild(s),{html:c.outerHTML,clipId:l,commands:e}}draw(t,e,n){const c=l(t),{svg:s,path:r}=this.genSvg(c);var o,i;return r.setAttribute("fill",(o=e.color,i=n.raw.primaryColour,o?o.rgba:i.rgba)),s.appendChild(r),{html:s.outerHTML,commands:c}}}}},function(t,e,n){"use strict";var c=n(25),s=n.n(c)()((function(t){return t[1]}));s.push([t.i,'#sheodox-jimaku-player{position:relative;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;text-align:center}#sheodox-jimaku-player button,#sheodox-jimaku-player .button{background:#fd0;border:none;padding:.4rem;line-height:1;font-weight:bold;color:#000;text-transform:uppercase;font-size:.9rem;margin-bottom:.2rem}#sheodox-jimaku-player button:disabled,#sheodox-jimaku-player .button:disabled{background:#2a3450}#sheodox-jimaku-player button:not(:disabled):hover,#sheodox-jimaku-player .button:not(:disabled):hover{background:#ffea6d;cursor:pointer;color:#000}#sheodox-jimaku-player button.secondary,#sheodox-jimaku-player .button.secondary{background:#11121863;border:1px solid #fd0;color:#fd0}#sheodox-jimaku-player .small-button{font-size:.6rem;padding:.2rem}#sheodox-jimaku-player input[type=text],#sheodox-jimaku-player input:not([type]){color:#fff;background:#0b0b26;border:1px solid #364962;padding:.2rem}#sheodox-jimaku-player input[type=text]:focus,#sheodox-jimaku-player input:not([type]):focus{border-color:#fd0}#sheodox-jimaku-player .tray h1{font-size:2rem;padding:.5rem 0;border-radius:3px;margin:0}#sheodox-jimaku-player .tray h2,#sheodox-jimaku-player .tray h3{margin:0 0 .4rem}#sheodox-jimaku-player .tray h3{margin-top:1rem}#sheodox-jimaku-player .tray a,#sheodox-jimaku-player .tray .a{color:#fff;font-family:"Source Han Sans","源ノ角ゴシック","Hiragino Sans","HiraKakuProN-W3","Hiragino Kaku Gothic ProN W3","Hiragino Kaku Gothic ProN","ヒラギノ角ゴ ProN W3","Noto Sans","Noto Sans CJK JP","メイリオ",Meiryo,"游ゴシック",YuGothic,"ＭＳ Ｐゴシック","MS PGothic","ＭＳ ゴシック","MS Gothic",sans-serif}#sheodox-jimaku-player .tray a:hover,#sheodox-jimaku-player .tray .a:hover{color:#0aff8c;cursor:pointer;text-decoration:underline}#sheodox-jimaku-player .tray .tray-tab-buttons button{color:#fff;background:none;border-bottom:.2rem solid transparent;border-radius:0;padding:.7rem;margin:0}#sheodox-jimaku-player .tray .tray-tab-buttons button:hover{background:#1d2435;border-bottom-color:#70f}#sheodox-jimaku-player .tray .tray-tab-buttons button:focus,#sheodox-jimaku-player .tray .tray-tab-buttons button[aria-selected=true]{border-bottom-color:#b300ff}#sheodox-jimaku-player .sr{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}',""]),e.a=s},,function(t,e,n){"use strict";var c,s=function(){return void 0===c&&(c=Boolean(window&&document&&document.all&&!window.atob)),c},r=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function i(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},c=[],s=0;s<t.length;s++){var r=t[s],l=e.base?r[0]+e.base:r[0],b=n[l]||0,a="".concat(l," ").concat(b);n[l]=b+1;var u=i(a),j={css:r[1],media:r[2],sourceMap:r[3]};-1!==u?(o[u].references++,o[u].updater(j)):o.push({identifier:a,updater:p(j,e),references:1}),c.push(a)}return c}function b(t){var e=document.createElement("style"),c=t.attributes||{};if(void 0===c.nonce){var s=n.nc;s&&(c.nonce=s)}if(Object.keys(c).forEach((function(t){e.setAttribute(t,c[t])})),"function"==typeof t.insert)t.insert(e);else{var o=r(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var a,u=(a=[],function(t,e){return a[t]=e,a.filter(Boolean).join("\n")});function j(t,e,n,c){var s=n?"":c.media?"@media ".concat(c.media," {").concat(c.css,"}"):c.css;if(t.styleSheet)t.styleSheet.cssText=u(e,s);else{var r=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}function d(t,e,n){var c=n.css,s=n.media,r=n.sourceMap;if(s?t.setAttribute("media",s):t.removeAttribute("media"),r&&"undefined"!=typeof btoa&&(c+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=c;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(c))}}var O=null,f=0;function p(t,e){var n,c,s;if(e.singleton){var r=f++;n=O||(O=b(e)),c=j.bind(null,n,r,!1),s=j.bind(null,n,r,!0)}else n=b(e),c=d.bind(null,n,e),s=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return c(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;c(t=e)}else s()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=s());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var c=0;c<n.length;c++){var s=i(n[c]);o[s].references--}for(var r=l(t,e),b=0;b<n.length;b++){var a=i(n[b]);0===o[a].references&&(o[a].updater(),o.splice(a,1))}n=r}}}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,c){"string"==typeof t&&(t=[[null,t,""]]);var s={};if(c)for(var r=0;r<this.length;r++){var o=this[r][0];null!=o&&(s[o]=!0)}for(var i=0;i<t.length;i++){var l=[].concat(t[i]);c&&s[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},,function(t,e,n){"use strict";n.r(e);var c=n(0),s=n(3);function r(t,e,n){const c=t.slice();return c[3]=e[n],c}function o(t){let e,n,s,r,o,i,l,b,a,u=t[3].title+"";function j(...e){return t[2](t[3],...e)}return{c(){e=Object(c.A)("li"),n=Object(c.A)("button"),s=Object(c.gb)(u),l=Object(c.cb)(),Object(c.i)(n,"role","tab"),Object(c.i)(n,"id",r="tab-"+t[3].id),Object(c.i)(n,"aria-selected",o=t[0]===t[3].id),Object(c.i)(n,"aria-controls",i="tab-content-"+t[3].id),Object(c.ib)(n,"selected",t[0]===t[3].id)},m(t,r){Object(c.J)(t,e,r),Object(c.g)(e,n),Object(c.g)(n,s),Object(c.g)(e,l),b||(a=Object(c.L)(n,"click",j),b=!0)},p(e,l){t=e,2&l&&u!==(u=t[3].title+"")&&Object(c.Z)(s,u),2&l&&r!==(r="tab-"+t[3].id)&&Object(c.i)(n,"id",r),3&l&&o!==(o=t[0]===t[3].id)&&Object(c.i)(n,"aria-selected",o),2&l&&i!==(i="tab-content-"+t[3].id)&&Object(c.i)(n,"aria-controls",i),3&l&&Object(c.ib)(n,"selected",t[0]===t[3].id)},d(t){t&&Object(c.z)(e),b=!1,a()}}}function i(t){let e,n=t[1],s=[];for(let e=0;e<n.length;e+=1)s[e]=o(r(t,n,e));return{c(){e=Object(c.A)("ul");for(let t=0;t<s.length;t+=1)s[t].c();Object(c.i)(e,"role","tablist"),Object(c.i)(e,"class","tab-list")},m(t,n){Object(c.J)(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,[c]){if(3&c){let i;for(n=t[1],i=0;i<n.length;i+=1){const l=r(t,n,i);s[i]?s[i].p(l,c):(s[i]=o(l),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=n.length}},i:c.O,o:c.O,d(t){t&&Object(c.z)(e),Object(c.y)(s,t)}}}function l(t,e,n){let{tabs:c}=e,{selectedTab:s=c[0].id}=e;return t.$$set=t=>{"tabs"in t&&n(1,c=t.tabs),"selectedTab"in t&&n(0,s=t.selectedTab)},[s,c,t=>n(0,s=t.id)]}class b extends c.b{constructor(t){super(),Object(c.I)(this,t,l,i,c.W,{tabs:1,selectedTab:0})}}var a=b;function u(t){let e,n,s,r;const o=t[3].default,i=Object(c.v)(o,t,t[2],null);return{c(){e=Object(c.A)("div"),i&&i.c(),Object(c.i)(e,"class","tab svelte-1gat1gp"),Object(c.i)(e,"id",n="tab-content-"+t[0]),Object(c.i)(e,"aria-labelledby",s="tab-"+t[0]),Object(c.i)(e,"role","tabpanel"),Object(c.ib)(e,"selected",t[0]===t[1])},m(t,n){Object(c.J)(t,e,n),i&&i.m(e,null),r=!0},p(t,[l]){i&&i.p&&4&l&&Object(c.mb)(i,o,t,t[2],l,null,null),(!r||1&l&&n!==(n="tab-content-"+t[0]))&&Object(c.i)(e,"id",n),(!r||1&l&&s!==(s="tab-"+t[0]))&&Object(c.i)(e,"aria-labelledby",s),3&l&&Object(c.ib)(e,"selected",t[0]===t[1])},i(t){r||(Object(c.jb)(i,t),r=!0)},o(t){Object(c.kb)(i,t),r=!1},d(t){t&&Object(c.z)(e),i&&i.d(t)}}}function j(t,e,n){let{$$slots:c={},$$scope:s}=e,{tabId:r}=e,{selectedTab:o}=e;return t.$$set=t=>{"tabId"in t&&n(0,r=t.tabId),"selectedTab"in t&&n(1,o=t.selectedTab),"$$scope"in t&&n(2,s=t.$$scope)},[r,o,s,c]}class d extends c.b{constructor(t){var e;super(),document.getElementById("svelte-1gat1gp-style")||((e=Object(c.A)("style")).id="svelte-1gat1gp-style",e.textContent=".tab.svelte-1gat1gp{display:none}.tab.selected.svelte-1gat1gp{display:block}",Object(c.g)(document.head,e)),Object(c.I)(this,t,j,u,c.W,{tabId:0,selectedTab:1})}}var O=d,f=n(1),p=n(2),g=n(6);function m(t){return"[object Date]"===Object.prototype.toString.call(t)}function h(t,e){if(t===e||t!=t)return()=>t;const n=typeof t;if(n!==typeof e||Array.isArray(t)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const n=e.map((e,n)=>h(t[n],e));return t=>n.map(e=>e(t))}if("object"===n){if(!t||!e)throw new Error("Object cannot be null");if(m(t)&&m(e)){t=t.getTime();const n=(e=e.getTime())-t;return e=>new Date(t+e*n)}const n=Object.keys(e),c={};return n.forEach(n=>{c[n]=h(t[n],e[n])}),t=>{const e={};return n.forEach(n=>{e[n]=c[n](t)}),e}}if("number"===n){const n=e-t;return e=>t+e*n}throw new Error(`Cannot interpolate ${n} values`)}var x=n(4);function v(t){let e,n,s,r,o,i,l,b,a,u,j,d,O,f,p,g,m,h,x,v,y,k,w,$,A,S;return{c(){e=Object(c.A)("div"),n=Object(c.A)("h1"),n.textContent="Fine Alignment",s=Object(c.cb)(),r=Object(c.A)("p"),o=Object(c.gb)("Play the video and use these adjustment buttons until the subtitles show at the right time.\n\t\t"),i=Object(c.A)("br"),l=Object(c.cb)(),b=Object(c.A)("strong"),a=Object(c.gb)("Subtitles are "),u=Object(c.gb)(t[0]),j=Object(c.cb)(),d=Object(c.A)("p"),d.textContent="Do the subtitles show...",O=Object(c.cb)(),f=Object(c.A)("button"),f.textContent="Way too late?",p=Object(c.cb)(),g=Object(c.A)("button"),g.textContent="Too late?",m=Object(c.cb)(),h=Object(c.A)("button"),h.textContent="Too early?",x=Object(c.cb)(),v=Object(c.A)("button"),v.textContent="Way too early?",y=Object(c.cb)(),k=Object(c.A)("br"),w=Object(c.cb)(),$=Object(c.A)("button"),$.textContent="Done",Object(c.i)(n,"class","svelte-t5ayh1"),Object(c.i)(f,"class","secondary"),Object(c.i)(g,"class","secondary"),Object(c.i)(h,"class","secondary"),Object(c.i)(v,"class","secondary"),Object(c.i)(e,"class","fine-align svelte-t5ayh1")},m(z,J){Object(c.J)(z,e,J),Object(c.g)(e,n),Object(c.g)(e,s),Object(c.g)(e,r),Object(c.g)(r,o),Object(c.g)(r,i),Object(c.g)(r,l),Object(c.g)(r,b),Object(c.g)(b,a),Object(c.g)(b,u),Object(c.g)(e,j),Object(c.g)(e,d),Object(c.g)(e,O),Object(c.g)(e,f),Object(c.g)(e,p),Object(c.g)(e,g),Object(c.g)(e,m),Object(c.g)(e,h),Object(c.g)(e,x),Object(c.g)(e,v),Object(c.g)(e,y),Object(c.g)(e,k),Object(c.g)(e,w),Object(c.g)(e,$),A||(S=[Object(c.L)(f,"click",t[1](-1*t[2])),Object(c.L)(g,"click",t[1](-1*t[3])),Object(c.L)(h,"click",t[1](t[3])),Object(c.L)(v,"click",t[1](t[2])),Object(c.L)($,"click",t[4])],A=!0)},p(t,[e]){1&e&&Object(c.Z)(u,t[0])},i:c.O,o:c.O,d(t){t&&Object(c.z)(e),A=!1,Object(c.V)(S)}}}function y(t,e,n){let r;Object(c.n)(t,x.c,t=>n(0,r=t));const o=Object(s.a)();return[r,t=>()=>{x.b.update(e=>e+t)},1e3,200,function(){Object(x.e)(Object(f.b)(x.b)),o("close")}]}class k extends c.b{constructor(t){var e;super(),document.getElementById("svelte-t5ayh1-style")||((e=Object(c.A)("style")).id="svelte-t5ayh1-style",e.textContent=".fine-align.svelte-t5ayh1{background:rgba(27, 26, 38, 0.9);padding:1rem;color:white;position:fixed;top:50vh;left:50vw;transform:translate(-50%, -50%);max-width:20rem}h1.svelte-t5ayh1{border-bottom:2px solid #f47521}",Object(c.g)(document.head,e)),Object(c.I)(this,t,y,v,c.W,{})}}var w=k,$=n(12),A=n(8);function S(t,e,n){const s=getComputedStyle(t),r="none"===s.transform?"":s.transform,o=e.from.width/t.clientWidth,i=e.from.height/t.clientHeight,l=(e.from.left-e.to.left)/o,b=(e.from.top-e.to.top)/i,a=Math.sqrt(l*l+b*b),{delay:u=0,duration:j=(t=>120*Math.sqrt(t)),easing:d=g.b}=n;return{delay:u,duration:Object(c.K)(j)?j(a):j,easing:d,css:(t,e)=>`transform: ${r} translate(${e*l}px, ${e*b}px);`}}var z=n(5);const{document:J}=c.F;function C(t,e,n){const c=t.slice();return c[6]=e[n],c[8]=n,c}function _(t){let e,n,s,r,o=(t[6].text||"").trim()+"";function i(...e){return t[3](t[6],...e)}return{c(){e=Object(c.A)("button"),n=Object(c.gb)(o),Object(c.i)(e,"class","a svelte-137x5q2")},m(t,o){Object(c.J)(t,e,o),Object(c.g)(e,n),s||(r=Object(c.L)(e,"click",i),s=!0)},p(e,s){t=e,1&s&&o!==(o=(t[6].text||"").trim()+"")&&Object(c.Z)(n,o)},d(t){t&&Object(c.z)(e),s=!1,r()}}}function N(t){let e,n=(t[6].text||"").trim()+"";return{c(){e=Object(c.gb)(n)},m(t,n){Object(c.J)(t,e,n)},p(t,s){1&s&&n!==(n=(t[6].text||"").trim()+"")&&Object(c.Z)(e,n)},d(t){t&&Object(c.z)(e)}}}function T(t,e){let n,s,r,o,i,l,b,a,u,j,d=c.O;function O(t,e){return"nothing"===t[1]?N:_}let f=O(e),p=f(e);return{key:t,first:null,c(){n=Object(c.A)("li"),s=Object(c.A)("button"),s.innerHTML='⯇<span class="sr">Rewind to this subtitle</span>',r=Object(c.cb)(),p.c(),o=Object(c.cb)(),Object(c.i)(s,"class","small-button secondary"),Object(c.i)(s,"title","Rewind to this subtitle"),Object(c.i)(n,"class","svelte-137x5q2"),this.first=n},m(t,i){Object(c.J)(t,n,i),Object(c.g)(n,s),Object(c.g)(n,r),p.m(n,null),Object(c.g)(n,o),a=!0,u||(j=Object(c.L)(s,"click",(function(){Object(c.K)(e[2](e[6]))&&e[2](e[6]).apply(this,arguments)})),u=!0)},p(t,c){f===(f=O(e=t))&&p?p.p(e,c):(p.d(1),p=f(e),p&&(p.c(),p.m(n,o)))},r(){b=n.getBoundingClientRect()},f(){Object(c.D)(n),d(),Object(c.f)(n,b)},a(){d(),d=Object(c.q)(n,b,S,{duration:200})},i(t){a||(Object(c.e)(()=>{l&&l.end(1),i||(i=Object(c.t)(n,A.b,{y:-50,duration:200})),i.start()}),a=!0)},o(t){i&&i.invalidate(),l=Object(c.u)(n,A.b,{y:50,duration:200}),a=!1},d(t){t&&Object(c.z)(n),p.d(),t&&l&&l.end(),u=!1,j()}}}function M(t){let e,n,s=[],r=new Map,o=t[0];const i=t=>t[6].text;for(let e=0;e<o.length;e+=1){let n=C(t,o,e),c=i(n);r.set(c,s[e]=T(c,n))}return{c(){e=Object(c.A)("ul");for(let t=0;t<s.length;t+=1)s[t].c();Object(c.i)(e,"id","recent-subs"),Object(c.i)(e,"class","svelte-137x5q2")},m(t,r){Object(c.J)(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){if(7&n){const o=t[0];Object(c.G)();for(let t=0;t<s.length;t+=1)s[t].r();s=Object(c.lb)(s,n,i,1,t,o,r,e,c.C,T,null,C);for(let t=0;t<s.length;t+=1)s[t].a();Object(c.m)()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)Object(c.jb)(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)Object(c.kb)(s[t]);n=!1},d(t){t&&Object(c.z)(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function L(t,e,n){let r,o;Object(c.n)(t,x.b,t=>n(4,r=t)),Object(c.n)(t,p.f,t=>n(1,o=t));let{recentSubs:i}=e;Object(s.a)();return t.$$set=t=>{"recentSubs"in t&&n(0,i=t.recentSubs)},[i,o,function(t){document.querySelector("video").currentTime=(t.start+r)/1e3-.5},t=>Object(z.c)(t.text)]}class I extends c.b{constructor(t){var e;super(),J.getElementById("svelte-137x5q2-style")||((e=Object(c.A)("style")).id="svelte-137x5q2-style",e.textContent=".a.svelte-137x5q2.svelte-137x5q2:hover{text-decoration:underline}li.svelte-137x5q2.svelte-137x5q2{padding-bottom:0.2rem}#recent-subs.svelte-137x5q2 li .a.svelte-137x5q2{white-space:pre;background:none;color:white;text-transform:none;font-weight:normal;margin:0;padding:0}li.svelte-137x5q2.svelte-137x5q2:not(:first-of-type)::after{content:' ';height:0;position:relative;border:1px solid #4a4a6a;display:block;margin:0 auto;border-radius:4px}ul.svelte-137x5q2.svelte-137x5q2{list-style:none;padding:0;display:flex;flex-direction:column-reverse}",Object(c.g)(J.head,e)),Object(c.I)(this,t,L,M,c.W,{recentSubs:0})}}var E=I;let P;const q=Object(f.d)(0),F=t=>Object(f.c)([],e=>{let n,c="number"==typeof t?t:0;"number"!=typeof t&&(n=t.subscribe(t=>{c=t}));const s=$.a.subscribe(t=>{const n=1e3*t-c;q.set(n),e(P.getSubs(n))});return()=>{s(),n&&n()}});function G(t,e,n){const c=t.slice();return c[6]=e[n],c}function H(t){let e,n=t[1],s=[];for(let e=0;e<n.length;e+=1)s[e]=W(G(t,n,e));return{c(){e=Object(c.A)("div");for(let t=0;t<s.length;t+=1)s[t].c();Object(c.i)(e,"class","svelte-xof7a2"),Object(c.ib)(e,"with-previews",t[0])},m(t,n){Object(c.J)(t,e,n);for(let t=0;t<s.length;t+=1)s[t].m(e,null)},p(t,r){if(11&r){let c;for(n=t[1],c=0;c<n.length;c+=1){const o=G(t,n,c);s[c]?s[c].p(o,r):(s[c]=W(o),s[c].c(),s[c].m(e,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=n.length}1&r&&Object(c.ib)(e,"with-previews",t[0])},d(t){t&&Object(c.z)(e),Object(c.y)(s,t)}}}function B(t){let e;return{c(){e=Object(c.A)("pre"),Object(c.i)(e,"class","subtitle-preview svelte-xof7a2")},m(t,n){Object(c.J)(t,e,n)},d(t){t&&Object(c.z)(e)}}}function W(t){let e,n,s,r,o,i,l,b=t[6].signed+"",a=t[0]&&B();function u(...e){return t[4](t[6],...e)}return{c(){e=Object(c.A)("button"),n=Object(c.gb)(b),s=Object(c.gb)("秒\n\t\t\t\t"),a&&a.c(),r=Object(c.cb)(),Object(c.i)(e,"class","secondary svelte-xof7a2")},m(b,j){Object(c.J)(b,e,j),Object(c.g)(e,n),Object(c.g)(e,s),a&&a.m(e,null),Object(c.g)(e,r),i||(l=[Object(c.L)(e,"click",u),Object(c.c)(o=t[2].call(null,e,t[6].alignment))],i=!0)},p(s,i){t=s,2&i&&b!==(b=t[6].signed+"")&&Object(c.Z)(n,b),t[0]?a||(a=B(),a.c(),a.m(e,r)):a&&(a.d(1),a=null),o&&Object(c.K)(o.update)&&2&i&&o.update.call(null,t[6].alignment)},d(t){t&&Object(c.z)(e),a&&a.d(),i=!1,Object(c.V)(l)}}}function V(t){let e,n=t[1].length&&H(t);return{c(){n&&n.c(),e=Object(c.B)()},m(t,s){n&&n.m(t,s),Object(c.J)(t,e,s)},p(t,[c]){t[1].length?n?n.p(t,c):(n=H(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:c.O,o:c.O,d(t){n&&n.d(t),t&&Object(c.z)(e)}}}function D(t,e,n){let r;Object(c.n)(t,x.a,t=>n(1,r=t));let{showPreviews:o=!1}=e;const i=Object(s.a)();function l(t){x.b.set(t),Object(x.e)(t),i("aligned")}return t.$$set=t=>{"showPreviews"in t&&n(0,o=t.showPreviews)},[o,r,function(t,e){if(!o)return;const n=Object(f.d)(e),c=t.querySelector(".subtitle-preview");return{update:t=>n.set(t),destroy:F(n).subscribe(t=>{const e=t.map(t=>t.text).join("\n").trim()||"\n\n";c.textContent=e.includes("\n")?e:"\n"+e})}},l,t=>l(t.alignment)]}class R extends c.b{constructor(t){var e;super(),document.getElementById("svelte-xof7a2-style")||((e=Object(c.A)("style")).id="svelte-xof7a2-style",e.textContent="button.svelte-xof7a2{margin:0.5rem;align-self:center;max-width:20rem;overflow:hidden}pre.svelte-xof7a2{margin:0;padding:0;font-size:0.7rem}.with-previews.svelte-xof7a2{display:grid;grid-gap:0.5rem;grid-template-columns:1fr 1fr}",Object(c.g)(document.head,e)),Object(c.I)(this,t,D,V,c.W,{showPreviews:0})}}var Z=R;const{document:K}=c.F;function Y(t){let e,n,s,r,o,i=t[4]&&U(t);return r=new Z({props:{showPreviews:!0}}),{c(){e=Object(c.A)("h3"),e.textContent="Switch to a previous alignment",n=Object(c.cb)(),i&&i.c(),s=Object(c.cb)(),Object(c.s)(r.$$.fragment),Object(c.i)(e,"class","svelte-u5r55h")},m(t,l){Object(c.J)(t,e,l),Object(c.J)(t,n,l),i&&i.m(t,l),Object(c.J)(t,s,l),Object(c.N)(r,t,l),o=!0},p(t,e){t[4]?i?i.p(t,e):(i=U(t),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},i(t){o||(Object(c.jb)(r.$$.fragment,t),o=!0)},o(t){Object(c.kb)(r.$$.fragment,t),o=!1},d(t){t&&Object(c.z)(e),t&&Object(c.z)(n),i&&i.d(t),t&&Object(c.z)(s),Object(c.x)(r,t)}}}function U(t){let e,n,s;return{c(){e=Object(c.A)("button"),e.textContent="Resume Video",Object(c.i)(e,"id","resume-button"),Object(c.i)(e,"class","secondary svelte-u5r55h")},m(t,r){Object(c.J)(t,e,r),n||(s=Object(c.L)(e,"click",Q),n=!0)},p:c.O,d(t){t&&Object(c.z)(e),n=!1,s()}}}function X(t){let e,n,s,r,o,i,l,b,a,u,j,d,O,f,p,g,m,h,x,v,y,k,w,$=t[3].length&&Y(t);return{c(){e=Object(c.A)("h2"),e.textContent="Start Over",n=Object(c.cb)(),s=Object(c.A)("div"),r=Object(c.A)("button"),r.textContent="Reselect subtitles",o=Object(c.cb)(),i=Object(c.A)("h2"),i.textContent="Alignment",l=Object(c.cb)(),b=Object(c.A)("div"),a=Object(c.A)("p"),u=Object(c.gb)(t[1]),j=Object(c.gb)(" ("),d=Object(c.gb)(t[2]),O=Object(c.gb)(")"),f=Object(c.cb)(),p=Object(c.A)("div"),g=Object(c.A)("button"),g.textContent="Realign subtitles",m=Object(c.cb)(),h=Object(c.A)("button"),h.textContent="Fine adjustment",x=Object(c.cb)(),$&&$.c(),v=Object(c.B)(),Object(c.i)(r,"class","secondary"),Object(c.i)(s,"class","row"),Object(c.i)(b,"class","row"),Object(c.i)(g,"class","secondary"),Object(c.i)(h,"class","secondary"),Object(c.i)(p,"class","row")},m(A,S){Object(c.J)(A,e,S),Object(c.J)(A,n,S),Object(c.J)(A,s,S),Object(c.g)(s,r),Object(c.J)(A,o,S),Object(c.J)(A,i,S),Object(c.J)(A,l,S),Object(c.J)(A,b,S),Object(c.g)(b,a),Object(c.g)(a,u),Object(c.g)(a,j),Object(c.g)(a,d),Object(c.g)(a,O),Object(c.J)(A,f,S),Object(c.J)(A,p,S),Object(c.g)(p,g),Object(c.g)(p,m),Object(c.g)(p,h),Object(c.J)(A,x,S),$&&$.m(A,S),Object(c.J)(A,v,S),y=!0,k||(w=[Object(c.L)(r,"click",t[6]),Object(c.L)(g,"click",t[7]),Object(c.L)(h,"click",t[8])],k=!0)},p(t,[e]){(!y||2&e)&&Object(c.Z)(u,t[1]),(!y||4&e)&&Object(c.Z)(d,t[2]),t[3].length?$?($.p(t,e),8&e&&Object(c.jb)($,1)):($=Y(t),$.c(),Object(c.jb)($,1),$.m(v.parentNode,v)):$&&(Object(c.G)(),Object(c.kb)($,1,1,()=>{$=null}),Object(c.m)())},i(t){y||(Object(c.jb)($),y=!0)},o(t){Object(c.kb)($),y=!1},d(t){t&&Object(c.z)(e),t&&Object(c.z)(n),t&&Object(c.z)(s),t&&Object(c.z)(o),t&&Object(c.z)(i),t&&Object(c.z)(l),t&&Object(c.z)(b),t&&Object(c.z)(f),t&&Object(c.z)(p),t&&Object(c.z)(x),$&&$.d(t),t&&Object(c.z)(v),k=!1,Object(c.V)(w)}}}function Q(){document.querySelector("video").play()}function tt(t,e,n){let r,o,i,l;Object(c.n)(t,x.c,t=>n(1,r=t)),Object(c.n)(t,x.h,t=>n(2,o=t)),Object(c.n)(t,x.a,t=>n(3,i=t)),Object(c.n)(t,p.d,t=>n(4,l=t));const b=Object(s.a)();let{fineAdjustDialogVisible:a}=e;return t.$$set=t=>{"fineAdjustDialogVisible"in t&&n(0,a=t.fineAdjustDialogVisible)},[a,r,o,i,l,b,()=>b("restart"),()=>b("realign"),()=>n(0,a=!0)]}class et extends c.b{constructor(t){var e;super(),K.getElementById("svelte-u5r55h-style")||((e=Object(c.A)("style")).id="svelte-u5r55h-style",e.textContent="#resume-button.svelte-u5r55h{width:100%}h3.svelte-u5r55h{margin:0}",Object(c.g)(K.head,e)),Object(c.I)(this,t,tt,X,c.W,{fineAdjustDialogVisible:0})}}var nt=et,ct=n(7);const{document:st}=c.F;function rt(t,e,n){const c=t.slice();return c[28]=e[n],c}function ot(t,e,n){const c=t.slice();return c[31]=e[n],c}function it(t){let e,n,s,r,o,i,l,b,a=t[31].name+"";return{c(){e=Object(c.A)("label"),n=Object(c.A)("input"),r=Object(c.cb)(),o=Object(c.gb)(a),i=Object(c.cb)(),Object(c.i)(n,"type","radio"),n.__value=s=t[31].value,n.value=n.__value,t[22][0].push(n),Object(c.i)(e,"class","radio-label svelte-nv72qe")},m(s,a){Object(c.J)(s,e,a),Object(c.g)(e,n),n.checked=n.__value===t[6],Object(c.g)(e,r),Object(c.g)(e,o),Object(c.g)(e,i),l||(b=Object(c.L)(n,"change",t[21]),l=!0)},p(t,e){64&e[0]&&(n.checked=n.__value===t[6])},d(s){s&&Object(c.z)(e),t[22][0].splice(t[22][0].indexOf(n),1),l=!1,b()}}}function lt(t){let e,n,s,r,o,i,l,b,a,u,j,d,O=t[8].overrideGlobalFontScale&&bt(t);return{c(){e=Object(c.A)("h3"),n=Object(c.gb)("Settings for "),s=Object(c.gb)(t[10]),r=Object(c.cb)(),o=Object(c.A)("div"),i=Object(c.A)("label"),l=Object(c.A)("input"),b=Object(c.gb)("\n            Use a different subtitle font size scale for this show"),a=Object(c.cb)(),O&&O.c(),u=Object(c.B)(),Object(c.i)(l,"type","checkbox"),Object(c.i)(o,"class","row")},m(f,p){Object(c.J)(f,e,p),Object(c.g)(e,n),Object(c.g)(e,s),Object(c.J)(f,r,p),Object(c.J)(f,o,p),Object(c.g)(o,i),Object(c.g)(i,l),l.checked=t[8].overrideGlobalFontScale,Object(c.g)(i,b),Object(c.J)(f,a,p),O&&O.m(f,p),Object(c.J)(f,u,p),j||(d=Object(c.L)(l,"change",t[24]),j=!0)},p(t,e){1024&e[0]&&Object(c.Z)(s,t[10]),256&e[0]&&(l.checked=t[8].overrideGlobalFontScale),t[8].overrideGlobalFontScale?O?O.p(t,e):(O=bt(t),O.c(),O.m(u.parentNode,u)):O&&(O.d(1),O=null)},d(t){t&&Object(c.z)(e),t&&Object(c.z)(r),t&&Object(c.z)(o),t&&Object(c.z)(a),O&&O.d(t),t&&Object(c.z)(u),j=!1,d()}}}function bt(t){let e,n,s,r,o,i,l,b,a,u,j,d=Math.floor(100*t[8].fontScale)+"";return{c(){e=Object(c.A)("div"),n=Object(c.A)("label"),s=Object(c.gb)("This show's subtitle font size scale ("),r=Object(c.gb)(d),o=Object(c.gb)("%)\n                "),i=Object(c.A)("br"),l=Object(c.cb)(),b=Object(c.A)("input"),Object(c.i)(b,"type","range"),Object(c.i)(b,"min","0.5"),Object(c.i)(b,"max","3"),Object(c.i)(b,"step","0.1"),b.disabled=a=!t[8].overrideGlobalFontScale,Object(c.i)(b,"class","svelte-nv72qe"),Object(c.i)(e,"class","row")},m(a,d){Object(c.J)(a,e,d),Object(c.g)(e,n),Object(c.g)(n,s),Object(c.g)(n,r),Object(c.g)(n,o),Object(c.g)(n,i),Object(c.g)(n,l),Object(c.g)(n,b),Object(c.ab)(b,t[8].fontScale),u||(j=[Object(c.L)(b,"change",t[25]),Object(c.L)(b,"input",t[25])],u=!0)},p(t,e){256&e[0]&&d!==(d=Math.floor(100*t[8].fontScale)+"")&&Object(c.Z)(r,d),256&e[0]&&a!==(a=!t[8].overrideGlobalFontScale)&&(b.disabled=a),256&e[0]&&Object(c.ab)(b,t[8].fontScale)},d(t){t&&Object(c.z)(e),u=!1,Object(c.V)(j)}}}function at(t){let e,n,s,r,o=t[28].title+"",i=t[28].detail+"";return{c(){e=Object(c.A)("dt"),n=Object(c.gb)(o),s=Object(c.A)("dd"),r=Object(c.gb)(i),Object(c.i)(e,"class","svelte-nv72qe"),Object(c.i)(s,"class","svelte-nv72qe")},m(t,o){Object(c.J)(t,e,o),Object(c.g)(e,n),Object(c.J)(t,s,o),Object(c.g)(s,r)},p(t,e){1&e[0]&&o!==(o=t[28].title+"")&&Object(c.Z)(n,o),1&e[0]&&i!==(i=t[28].detail+"")&&Object(c.Z)(r,i)},d(t){t&&Object(c.z)(e),t&&Object(c.z)(s)}}}function ut(t){let e,n,s,r,o,i,l,b,a,u,j,d,O,f,p,g,m,h,x,v,y,k,w,$,A,S,z,J,C,_,N,T,M,L,I,E,P,q,F,G,H,B,W,V,D,R,Z,K,Y,U,X,Q,tt,et,nt,ct,st,bt,ut,jt,dt,Ot,ft,pt,gt,mt,ht,xt,vt=Math.floor(100*t[7])+"",yt=t[0].fileName+"",kt=t[14],wt=[];for(let e=0;e<kt.length;e+=1)wt[e]=it(ot(t,kt,e));let $t=t[9]&&lt(t),At=t[0].debugInfo(),St=[];for(let e=0;e<At.length;e+=1)St[e]=at(rt(t,At,e));return{c(){e=Object(c.A)("h2"),e.textContent="Settings",n=Object(c.cb)(),s=Object(c.A)("div"),r=Object(c.A)("label"),r.textContent="Subtitle fallback color:",o=Object(c.cb)(),i=Object(c.A)("input"),l=Object(c.cb)(),b=Object(c.A)("div"),a=Object(c.A)("input"),u=Object(c.cb)(),j=Object(c.A)("label"),j.innerHTML='Show subs over video (<kbd title="Hotkey: h" class="svelte-nv72qe">H</kbd>)',d=Object(c.cb)(),O=Object(c.A)("div"),f=Object(c.A)("input"),p=Object(c.cb)(),g=Object(c.A)("label"),g.textContent="Pause when tray is open",m=Object(c.cb)(),h=Object(c.A)("div"),x=Object(c.A)("input"),v=Object(c.cb)(),y=Object(c.A)("label"),y.innerHTML='Auto-copy current subtitles\n        <span class="muted svelte-nv72qe">This will copy the current subtitles to your clipboard whenever they change.</span>',k=Object(c.cb)(),w=Object(c.A)("div"),$=Object(c.A)("input"),A=Object(c.cb)(),S=Object(c.A)("label"),S.innerHTML='Invert subtitle vertical alignment (<kbd title="Hotkey: i" class="svelte-nv72qe">I</kbd>) <span class="muted svelte-nv72qe">(i.e. if subtitles should be near the bottom this will make them show near the top).\n\t\t\t\t\tYou&#39;ll likely want this enabled if you intend to watch with VRV&#39;s subtitles at the same time.</span>',z=Object(c.cb)(),J=Object(c.A)("div"),C=Object(c.A)("fieldset"),_=Object(c.A)("legend"),_.textContent="What should happen when a subtitle is clicked",N=Object(c.cb)();for(let t=0;t<wt.length;t+=1)wt[t].c();T=Object(c.cb)(),M=Object(c.A)("div"),L=Object(c.A)("label"),I=Object(c.gb)("Subtitle font size scale ("),E=Object(c.gb)(vt),P=Object(c.gb)("%)\n        "),q=Object(c.A)("br"),F=Object(c.cb)(),G=Object(c.A)("input"),B=Object(c.cb)(),$t&&$t.c(),W=Object(c.cb)(),V=Object(c.A)("h3"),V.textContent="About",D=Object(c.cb)(),R=Object(c.A)("details"),Z=Object(c.A)("summary"),Z.textContent="Debug Information",K=Object(c.cb)(),Y=Object(c.A)("dl"),U=Object(c.A)("dt"),U.textContent="Subtitles File",X=Object(c.A)("dd"),Q=Object(c.gb)(yt),tt=Object(c.A)("dt"),tt.textContent="Alignment",et=Object(c.A)("dd"),nt=Object(c.gb)(t[11]),ct=Object(c.gb)(" ("),st=Object(c.gb)(t[12]),bt=Object(c.gb)(")");for(let t=0;t<St.length;t+=1)St[t].c();ut=Object(c.cb)(),jt=Object(c.A)("div"),dt=Object(c.A)("button"),dt.textContent="⬇ Download parsed subtitles",Ot=Object(c.cb)(),ft=Object(c.A)("div"),pt=Object(c.A)("button"),pt.textContent="⬇ Download currently visible parsed subtitles",gt=Object(c.cb)(),mt=Object(c.A)("div"),mt.innerHTML='<a target="_blank" href="https://github.com/sheodox/jimaku-player/issues" rel="noopener noreferrer">Issue? Report it here!</a>',Object(c.i)(r,"for","subtitle-color"),Object(c.i)(i,"type","color"),Object(c.i)(i,"id","subtitle-color"),Object(c.i)(s,"class","row"),Object(c.i)(a,"id","show-subs"),Object(c.i)(a,"type","checkbox"),Object(c.i)(j,"for","show-subs"),Object(c.i)(b,"class","row"),Object(c.i)(f,"id","pause-on-tray"),Object(c.i)(f,"type","checkbox"),Object(c.i)(g,"for","pause-on-tray"),Object(c.i)(O,"class","row"),Object(c.i)(x,"id","auto-copy-subtitles"),Object(c.i)(x,"type","checkbox"),Object(c.i)(y,"for","auto-copy-subtitles"),Object(c.i)(h,"class","row"),Object(c.i)($,"id","invert-subtitle-alignment"),Object(c.i)($,"type","checkbox"),Object(c.i)(S,"for","invert-subtitle-alignment"),Object(c.i)(w,"class","row"),Object(c.i)(C,"class","svelte-nv72qe"),Object(c.i)(J,"class","row"),Object(c.i)(G,"type","range"),Object(c.i)(G,"min","0.5"),Object(c.i)(G,"max","3"),Object(c.i)(G,"step","0.1"),G.disabled=H=t[8]&&t[8].overrideGlobalFontScale,Object(c.i)(G,"class","svelte-nv72qe"),Object(c.i)(M,"class","row"),Object(c.i)(Z,"class","svelte-nv72qe"),Object(c.i)(U,"class","svelte-nv72qe"),Object(c.i)(X,"class","svelte-nv72qe"),Object(c.i)(tt,"class","svelte-nv72qe"),Object(c.i)(et,"class","svelte-nv72qe"),Object(c.i)(jt,"class","row"),Object(c.i)(ft,"class","row"),Object(c.i)(mt,"class","row")},m(H,rt){Object(c.J)(H,e,rt),Object(c.J)(H,n,rt),Object(c.J)(H,s,rt),Object(c.g)(s,r),Object(c.g)(s,o),Object(c.g)(s,i),Object(c.ab)(i,t[1]),Object(c.J)(H,l,rt),Object(c.J)(H,b,rt),Object(c.g)(b,a),a.checked=t[2],Object(c.g)(b,u),Object(c.g)(b,j),Object(c.J)(H,d,rt),Object(c.J)(H,O,rt),Object(c.g)(O,f),f.checked=t[3],Object(c.g)(O,p),Object(c.g)(O,g),Object(c.J)(H,m,rt),Object(c.J)(H,h,rt),Object(c.g)(h,x),x.checked=t[4],Object(c.g)(h,v),Object(c.g)(h,y),Object(c.J)(H,k,rt),Object(c.J)(H,w,rt),Object(c.g)(w,$),$.checked=t[5],Object(c.g)(w,A),Object(c.g)(w,S),Object(c.J)(H,z,rt),Object(c.J)(H,J,rt),Object(c.g)(J,C),Object(c.g)(C,_),Object(c.g)(C,N);for(let t=0;t<wt.length;t+=1)wt[t].m(C,null);Object(c.J)(H,T,rt),Object(c.J)(H,M,rt),Object(c.g)(M,L),Object(c.g)(L,I),Object(c.g)(L,E),Object(c.g)(L,P),Object(c.g)(L,q),Object(c.g)(L,F),Object(c.g)(L,G),Object(c.ab)(G,t[7]),Object(c.J)(H,B,rt),$t&&$t.m(H,rt),Object(c.J)(H,W,rt),Object(c.J)(H,V,rt),Object(c.J)(H,D,rt),Object(c.J)(H,R,rt),Object(c.g)(R,Z),Object(c.g)(R,K),Object(c.g)(R,Y),Object(c.g)(Y,U),Object(c.g)(Y,X),Object(c.g)(X,Q),Object(c.g)(Y,tt),Object(c.g)(Y,et),Object(c.g)(et,nt),Object(c.g)(et,ct),Object(c.g)(et,st),Object(c.g)(et,bt);for(let t=0;t<St.length;t+=1)St[t].m(Y,null);Object(c.g)(R,ut),Object(c.g)(R,jt),Object(c.g)(jt,dt),Object(c.g)(R,Ot),Object(c.g)(R,ft),Object(c.g)(ft,pt),Object(c.J)(H,gt,rt),Object(c.J)(H,mt,rt),ht||(xt=[Object(c.L)(i,"input",t[16]),Object(c.L)(a,"change",t[17]),Object(c.L)(f,"change",t[18]),Object(c.L)(x,"change",t[19]),Object(c.L)($,"change",t[20]),Object(c.L)(G,"change",t[23]),Object(c.L)(G,"input",t[23]),Object(c.L)(dt,"click",t[26]),Object(c.L)(pt,"click",t[27])],ht=!0)},p(t,e){if(2&e[0]&&Object(c.ab)(i,t[1]),4&e[0]&&(a.checked=t[2]),8&e[0]&&(f.checked=t[3]),16&e[0]&&(x.checked=t[4]),32&e[0]&&($.checked=t[5]),16448&e[0]){let n;for(kt=t[14],n=0;n<kt.length;n+=1){const c=ot(t,kt,n);wt[n]?wt[n].p(c,e):(wt[n]=it(c),wt[n].c(),wt[n].m(C,null))}for(;n<wt.length;n+=1)wt[n].d(1);wt.length=kt.length}if(128&e[0]&&vt!==(vt=Math.floor(100*t[7])+"")&&Object(c.Z)(E,vt),256&e[0]&&H!==(H=t[8]&&t[8].overrideGlobalFontScale)&&(G.disabled=H),128&e[0]&&Object(c.ab)(G,t[7]),t[9]?$t?$t.p(t,e):($t=lt(t),$t.c(),$t.m(W.parentNode,W)):$t&&($t.d(1),$t=null),1&e[0]&&yt!==(yt=t[0].fileName+"")&&Object(c.Z)(Q,yt),2048&e[0]&&Object(c.Z)(nt,t[11]),4096&e[0]&&Object(c.Z)(st,t[12]),1&e[0]){let n;for(At=t[0].debugInfo(),n=0;n<At.length;n+=1){const c=rt(t,At,n);St[n]?St[n].p(c,e):(St[n]=at(c),St[n].c(),St[n].m(Y,null))}for(;n<St.length;n+=1)St[n].d(1);St.length=At.length}},i:c.O,o:c.O,d(t){t&&Object(c.z)(e),t&&Object(c.z)(n),t&&Object(c.z)(s),t&&Object(c.z)(l),t&&Object(c.z)(b),t&&Object(c.z)(d),t&&Object(c.z)(O),t&&Object(c.z)(m),t&&Object(c.z)(h),t&&Object(c.z)(k),t&&Object(c.z)(w),t&&Object(c.z)(z),t&&Object(c.z)(J),Object(c.y)(wt,t),t&&Object(c.z)(T),t&&Object(c.z)(M),t&&Object(c.z)(B),$t&&$t.d(t),t&&Object(c.z)(W),t&&Object(c.z)(V),t&&Object(c.z)(D),t&&Object(c.z)(R),Object(c.y)(St,t),t&&Object(c.z)(gt),t&&Object(c.z)(mt),ht=!1,Object(c.V)(xt)}}}function jt(t,e,n){let s,r,o,i,l,b,a,u,j,d,O,f,g;Object(c.n)(t,p.g,t=>n(1,s=t)),Object(c.n)(t,p.e,t=>n(2,r=t)),Object(c.n)(t,p.d,t=>n(3,o=t)),Object(c.n)(t,p.a,t=>n(4,i=t)),Object(c.n)(t,p.c,t=>n(5,l=t)),Object(c.n)(t,p.f,t=>n(6,b=t)),Object(c.n)(t,p.b,t=>n(7,a=t)),Object(c.n)(t,ct.a,t=>n(8,u=t)),Object(c.n)(t,ct.b,t=>n(9,j=t)),Object(c.n)(t,x.g,t=>n(10,d=t)),Object(c.n)(t,x.c,t=>n(11,O=t)),Object(c.n)(t,x.h,t=>n(12,f=t)),Object(c.n)(t,q,t=>n(13,g=t));let{subtitles:m}=e;function h(t){const e=document.createElement("a"),n=new Blob([m.serialize(t)],{type:"application/json"});e.download="parsed-subtitles.json",e.href=URL.createObjectURL(n),document.body.appendChild(e),e.click(),document.body.removeChild(e)}return t.$$set=t=>{"subtitles"in t&&n(0,m=t.subtitles)},[m,s,r,o,i,l,b,a,u,j,d,O,f,g,[{value:"jisho",name:"Search on Jisho"},{value:"copy",name:"Copy to clipboard"},{value:"nothing",name:"Do nothing"}],h,function(){s=this.value,p.g.set(s)},function(){r=this.checked,p.e.set(r)},function(){o=this.checked,p.d.set(o)},function(){i=this.checked,p.a.set(i)},function(){l=this.checked,p.c.set(l)},function(){b=this.__value,p.f.set(b)},[[]],function(){a=Object(c.hb)(this.value),p.b.set(a)},function(){u.overrideGlobalFontScale=this.checked,ct.a.set(u)},function(){u.fontScale=Object(c.hb)(this.value),ct.a.set(u)},()=>h(),()=>h(g)]}class dt extends c.b{constructor(t){var e;super(),st.getElementById("svelte-nv72qe-style")||((e=Object(c.A)("style")).id="svelte-nv72qe-style",e.textContent="dt.svelte-nv72qe{font-weight:bold}dd.svelte-nv72qe{font-style:italic}kbd.svelte-nv72qe{color:white;background:#2f2d2d;border:1px solid #444;border-radius:0.2rem;padding:0 0.2rem;font-family:monospace}.muted.svelte-nv72qe{color:#5b5c6f}summary.svelte-nv72qe{cursor:pointer}input[type=range].svelte-nv72qe:disabled{opacity:0.3}.radio-label.svelte-nv72qe{display:block}fieldset.svelte-nv72qe{margin:0.2rem}",Object(c.g)(st.head,e)),Object(c.I)(this,t,jt,ut,c.W,{subtitles:0},[-1,-1])}}var Ot=dt;function ft(t){let e,n,s,r;function o(e){t[11].call(null,e)}let i={tabs:t[9]};return void 0!==t[4]&&(i.selectedTab=t[4]),n=new a({props:i}),c.k.push(()=>Object(c.j)(n,"selectedTab",o)),{c(){e=Object(c.A)("div"),Object(c.s)(n.$$.fragment),Object(c.i)(e,"class","tray-tab-buttons")},m(t,s){Object(c.J)(t,e,s),Object(c.N)(n,e,null),r=!0},p(t,e){const r={};!s&&16&e&&(s=!0,r.selectedTab=t[4],Object(c.d)(()=>s=!1)),n.$set(r)},i(t){r||(Object(c.jb)(n.$$.fragment,t),r=!0)},o(t){Object(c.kb)(n.$$.fragment,t),r=!1},d(t){t&&Object(c.z)(e),Object(c.x)(n)}}}function pt(t){let e,n,s,r,o,i,l,b,a,u;function j(e){t[13].call(null,e)}let d={tabId:"recent",$$slots:{default:[mt]},$$scope:{ctx:t}};function f(e){t[17].call(null,e)}void 0!==t[4]&&(d.selectedTab=t[4]),n=new O({props:d}),c.k.push(()=>Object(c.j)(n,"selectedTab",j));let p={tabId:"setup",$$slots:{default:[ht]},$$scope:{ctx:t}};function g(e){t[18].call(null,e)}void 0!==t[4]&&(p.selectedTab=t[4]),o=new O({props:p}),c.k.push(()=>Object(c.j)(o,"selectedTab",f));let m={tabId:"settings",$$slots:{default:[xt]},$$scope:{ctx:t}};return void 0!==t[4]&&(m.selectedTab=t[4]),b=new O({props:m}),c.k.push(()=>Object(c.j)(b,"selectedTab",g)),{c(){e=Object(c.A)("div"),Object(c.s)(n.$$.fragment),r=Object(c.cb)(),Object(c.s)(o.$$.fragment),l=Object(c.cb)(),Object(c.s)(b.$$.fragment),Object(c.i)(e,"class","tab-content svelte-wm6m6g")},m(t,s){Object(c.J)(t,e,s),Object(c.N)(n,e,null),Object(c.g)(e,r),Object(c.N)(o,e,null),Object(c.g)(e,l),Object(c.N)(b,e,null),u=!0},p(t,e){const r={};33554433&e&&(r.$$scope={dirty:e,ctx:t}),!s&&16&e&&(s=!0,r.selectedTab=t[4],Object(c.d)(()=>s=!1)),n.$set(r);const l={};33554440&e&&(l.$$scope={dirty:e,ctx:t}),!i&&16&e&&(i=!0,l.selectedTab=t[4],Object(c.d)(()=>i=!1)),o.$set(l);const u={};33554434&e&&(u.$$scope={dirty:e,ctx:t}),!a&&16&e&&(a=!0,u.selectedTab=t[4],Object(c.d)(()=>a=!1)),b.$set(u)},i(t){u||(Object(c.jb)(n.$$.fragment,t),Object(c.jb)(o.$$.fragment,t),Object(c.jb)(b.$$.fragment,t),u=!0)},o(t){Object(c.kb)(n.$$.fragment,t),Object(c.kb)(o.$$.fragment,t),Object(c.kb)(b.$$.fragment,t),u=!1},d(t){t&&Object(c.z)(e),Object(c.x)(n),Object(c.x)(o),Object(c.x)(b)}}}function gt(t){let e,n,s,r,o,i,l;return{c(){e=Object(c.A)("div"),n=Object(c.A)("div"),s=Object(c.A)("button"),s.textContent="Select Subtitles",r=Object(c.cb)(),o=Object(c.A)("div"),o.innerHTML='<a target="_blank" href="https://github.com/sheodox/jimaku-player/issues" rel="noopener noreferrer">Issue? Report it here!</a>',Object(c.i)(n,"class","row svelte-wm6m6g"),Object(c.i)(o,"class","row svelte-wm6m6g"),Object(c.i)(e,"class","tab tab-active tab-cancelled svelte-wm6m6g")},m(b,a){Object(c.J)(b,e,a),Object(c.g)(e,n),Object(c.g)(n,s),Object(c.g)(e,r),Object(c.g)(e,o),i||(l=Object(c.L)(s,"click",t[12]),i=!0)},p:c.O,i:c.O,o:c.O,d(t){t&&Object(c.z)(e),i=!1,l()}}}function mt(t){let e,n;return e=new E({props:{recentSubs:t[0]}}),{c(){Object(c.s)(e.$$.fragment)},m(t,s){Object(c.N)(e,t,s),n=!0},p(t,n){const c={};1&n&&(c.recentSubs=t[0]),e.$set(c)},i(t){n||(Object(c.jb)(e.$$.fragment,t),n=!0)},o(t){Object(c.kb)(e.$$.fragment,t),n=!1},d(t){Object(c.x)(e,t)}}}function ht(t){let e,n,s;function r(e){t[14].call(null,e)}let o={};return void 0!==t[3]&&(o.fineAdjustDialogVisible=t[3]),e=new nt({props:o}),c.k.push(()=>Object(c.j)(e,"fineAdjustDialogVisible",r)),e.$on("realign",t[15]),e.$on("restart",t[16]),{c(){Object(c.s)(e.$$.fragment)},m(t,n){Object(c.N)(e,t,n),s=!0},p(t,s){const r={};!n&&8&s&&(n=!0,r.fineAdjustDialogVisible=t[3],Object(c.d)(()=>n=!1)),e.$set(r)},i(t){s||(Object(c.jb)(e.$$.fragment,t),s=!0)},o(t){Object(c.kb)(e.$$.fragment,t),s=!1},d(t){Object(c.x)(e,t)}}}function xt(t){let e,n;return e=new Ot({props:{subtitles:t[1]}}),{c(){Object(c.s)(e.$$.fragment)},m(t,s){Object(c.N)(e,t,s),n=!0},p(t,n){const c={};2&n&&(c.subtitles=t[1]),e.$set(c)},i(t){n||(Object(c.jb)(e.$$.fragment,t),n=!0)},o(t){Object(c.kb)(e.$$.fragment,t),n=!1},d(t){Object(c.x)(e,t)}}}function vt(t){let e,n;return e=new w({}),e.$on("close",t[19]),{c(){Object(c.s)(e.$$.fragment)},m(t,s){Object(c.N)(e,t,s),n=!0},p:c.O,i(t){n||(Object(c.jb)(e.$$.fragment,t),n=!0)},o(t){Object(c.kb)(e.$$.fragment,t),n=!1},d(t){Object(c.x)(e,t)}}}function yt(t){let e,n,s,r,o,i,l,b,a,u,j,d,O,f,p="normal"===t[2]&&ft(t);const g=[gt,pt],m=[];function h(t,e){return"cancelled"===t[2]?0:"normal"===t[2]?1:-1}~(i=h(t))&&(l=m[i]=g[i](t));let x=t[3]&&vt(t);return{c(){e=Object(c.A)("div"),n=Object(c.A)("div"),s=Object(c.A)("h1"),s.textContent="字幕プレーヤー",r=Object(c.cb)(),p&&p.c(),o=Object(c.cb)(),l&&l.c(),b=Object(c.cb)(),a=Object(c.A)("div"),a.innerHTML='<a target="_blank" href="https://discord.gg/Vyjjyj4" rel="noopener noreferrer">Join the Discord community for release notes and discussion!</a>',u=Object(c.cb)(),x&&x.c(),j=Object(c.B)(),Object(c.i)(n,"class","tray-header svelte-wm6m6g"),Object(c.i)(a,"class","row svelte-wm6m6g"),Object(c.i)(e,"class","tray svelte-wm6m6g"),Object(c.bb)(e,"right",t[6]+"rem"),Object(c.ib)(e,"inactive",!t[5]),Object(c.ib)(e,"hidden",t[3])},m(l,g){Object(c.J)(l,e,g),Object(c.g)(e,n),Object(c.g)(n,s),Object(c.g)(n,r),p&&p.m(n,null),Object(c.g)(e,o),~i&&m[i].m(e,null),Object(c.g)(e,b),Object(c.g)(e,a),Object(c.J)(l,u,g),x&&x.m(l,g),Object(c.J)(l,j,g),d=!0,O||(f=[Object(c.L)(e,"mouseenter",t[10](!0)),Object(c.L)(e,"mouseleave",t[10](!1))],O=!0)},p(t,[s]){"normal"===t[2]?p?(p.p(t,s),4&s&&Object(c.jb)(p,1)):(p=ft(t),p.c(),Object(c.jb)(p,1),p.m(n,null)):p&&(Object(c.G)(),Object(c.kb)(p,1,1,()=>{p=null}),Object(c.m)());let r=i;i=h(t),i===r?~i&&m[i].p(t,s):(l&&(Object(c.G)(),Object(c.kb)(m[r],1,1,()=>{m[r]=null}),Object(c.m)()),~i?(l=m[i],l||(l=m[i]=g[i](t),l.c()),Object(c.jb)(l,1),l.m(e,b)):l=null),(!d||64&s)&&Object(c.bb)(e,"right",t[6]+"rem"),32&s&&Object(c.ib)(e,"inactive",!t[5]),8&s&&Object(c.ib)(e,"hidden",t[3]),t[3]?x?(x.p(t,s),8&s&&Object(c.jb)(x,1)):(x=vt(t),x.c(),Object(c.jb)(x,1),x.m(j.parentNode,j)):x&&(Object(c.G)(),Object(c.kb)(x,1,1,()=>{x=null}),Object(c.m)())},i(t){d||(Object(c.jb)(p),Object(c.jb)(l),Object(c.jb)(x),d=!0)},o(t){Object(c.kb)(p),Object(c.kb)(l),Object(c.kb)(x),d=!1},d(t){t&&Object(c.z)(e),p&&p.d(),~i&&m[i].d(),t&&Object(c.z)(u),x&&x.d(t),t&&Object(c.z)(j),O=!1,Object(c.V)(f)}}}function kt(t,e,n){let r,o;Object(c.n)(t,$.b,t=>n(5,r=t));const i=Object(s.a)(),l=-26,b=0,a=function(t,e={}){const n=Object(f.d)(t);let s,r=t;function o(o,i){if(null==t)return n.set(t=o),Promise.resolve();r=o;let l=s,b=!1,{delay:a=0,duration:u=400,easing:j=g.c,interpolate:d=h}=Object(c.h)(Object(c.h)({},e),i);if(0===u)return l&&(l.abort(),l=null),n.set(t=r),Promise.resolve();const O=Object(c.P)()+a;let f;return s=Object(c.M)(e=>{if(e<O)return!0;b||(f=d(t,o),"function"==typeof u&&(u=u(t,o)),b=!0),l&&(l.abort(),l=null);const c=e-O;return c>u?(n.set(t=o),!1):(n.set(t=f(j(c/u))),!0)}),s.promise}return{set:o,update:(e,n)=>o(e(r,t),n),subscribe:n.subscribe}}(l,{duration:300,easing:g.b});Object(c.n)(t,a,t=>n(6,o=t));let u,{recentSubs:j=[]}=e,{subtitles:d={}}=e,{mode:O="normal"}=e,m=!1;return t.$$set=t=>{"recentSubs"in t&&n(0,j=t.recentSubs),"subtitles"in t&&n(1,d=t.subtitles),"mode"in t&&n(2,O=t.mode)},[j,d,O,m,u,r,o,i,a,[{id:"recent",title:"Recent Subtitles"},{id:"setup",title:"Setup"},{id:"settings",title:"Settings"}],function(t){return()=>{a.set(t?b:l),t&&!Object(f.b)(p.d)||i("tray-pauser",t)}},function(t){u=t,n(4,u)},()=>i("restart"),function(t){u=t,n(4,u)},function(t){m=t,n(3,m)},function(e){Object(c.l)(t,e)},function(e){Object(c.l)(t,e)},function(t){u=t,n(4,u)},function(t){u=t,n(4,u)},()=>n(3,m=!1)]}class wt extends c.b{constructor(t){var e;super(),document.getElementById("svelte-wm6m6g-style")||((e=Object(c.A)("style")).id="svelte-wm6m6g-style",e.textContent=".tray.svelte-wm6m6g.svelte-wm6m6g{width:28rem;margin-top:0.5rem;background:rgba(255, 255, 255, 0.2);position:fixed;right:0;top:0;color:white;height:calc(100% - 10rem);display:flex;flex-direction:column;text-align:center;border-radius:5px 0 0 5px}.tray.inactive.svelte-wm6m6g.svelte-wm6m6g{background:transparent;transition:background 0.2s}.tray.svelte-wm6m6g>.svelte-wm6m6g{visibility:hidden}.tray.svelte-wm6m6g.svelte-wm6m6g:hover{background:#0c1015;overflow:auto;border-radius:3px;border:1px solid #8c8c8c21;border-right:none}.tray.svelte-wm6m6g:hover>*{visibility:visible}.tray-header.svelte-wm6m6g.svelte-wm6m6g{background:#181d2b;border-bottom:1px solid #8c8c8c21}.tab-content.svelte-wm6m6g.svelte-wm6m6g{text-align:left;padding:0.5rem 2rem;flex:1}.row.svelte-wm6m6g.svelte-wm6m6g:not(:last-child){margin-bottom:0.5rem}.tab-cancelled.svelte-wm6m6g.svelte-wm6m6g{text-align:center}.hidden.svelte-wm6m6g.svelte-wm6m6g{display:none}.tray.svelte-wm6m6g .tab-list{margin:0}.tray.svelte-wm6m6g .tab-list li{display:inline-block}",Object(c.g)(document.head,e)),Object(c.I)(this,t,kt,yt,c.W,{recentSubs:0,subtitles:1,mode:2})}}var $t=wt,At=n(18);function St(t,e,n){const c=t.slice();return c[7]=e[n],c}function zt(t){let e,n=t[0].text+"";return{c(){e=Object(c.gb)(n)},m(t,n){Object(c.J)(t,e,n)},p(t,s){1&s&&n!==(n=t[0].text+"")&&Object(c.Z)(e,n)},i:c.O,o:c.O,d(t){t&&Object(c.z)(e)}}}function Jt(t){let e,n,s=[],r=new Map,o=t[0].phrases;const i=t=>t[7]._id;for(let e=0;e<o.length;e+=1){let n=St(t,o,e),c=i(n);r.set(c,s[e]=Mt(c,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=Object(c.B)()},m(t,r){for(let e=0;e<s.length;e+=1)s[e].m(t,r);Object(c.J)(t,e,r),n=!0},p(t,n){if(3&n){const o=t[0].phrases;Object(c.G)(),s=Object(c.lb)(s,n,i,1,t,o,r,e.parentNode,c.S,Mt,e,St),Object(c.m)()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)Object(c.jb)(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)Object(c.kb)(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&Object(c.z)(e)}}}function Ct(t){let e,n,s,r,o,i,l=t[7].text+"",b=t[7].html&&Nt(t);return{c(){e=Object(c.A)("span"),b&&b.c(),n=Object(c.cb)(),s=Object(c.gb)(l),r=Object(c.cb)(),Object(c.i)(e,"style",o=t[1](t[7],t[0])),Object(c.i)(e,"data-phrase-id",i=t[7]._id)},m(t,o){Object(c.J)(t,e,o),b&&b.m(e,null),Object(c.g)(e,n),Object(c.g)(e,s),Object(c.g)(e,r)},p(t,r){t[7].html?b?b.p(t,r):(b=Nt(t),b.c(),b.m(e,n)):b&&(b.d(1),b=null),1&r&&l!==(l=t[7].text+"")&&Object(c.Z)(s,l),1&r&&o!==(o=t[1](t[7],t[0]))&&Object(c.i)(e,"style",o),1&r&&i!==(i=t[7]._id)&&Object(c.i)(e,"data-phrase-id",i)},i:c.O,o:c.O,d(t){t&&Object(c.z)(e),b&&b.d()}}}function _t(t){let e,n,s,r,o,i,l,b,a,u=t[7].text+"",j=t[7].html&&Tt(t);return{c(){e=Object(c.A)("span"),j&&j.c(),n=Object(c.cb)(),s=Object(c.gb)(u),r=Object(c.cb)(),Object(c.i)(e,"style",o=t[1](t[7],t[0])),Object(c.i)(e,"data-phrase-id",i=t[7]._id)},m(t,o){Object(c.J)(t,e,o),j&&j.m(e,null),Object(c.g)(e,n),Object(c.g)(e,s),Object(c.g)(e,r),a=!0},p(r,l){(t=r)[7].html?j?j.p(t,l):(j=Tt(t),j.c(),j.m(e,n)):j&&(j.d(1),j=null),(!a||1&l)&&u!==(u=t[7].text+"")&&Object(c.Z)(s,u),(!a||1&l&&o!==(o=t[1](t[7],t[0])))&&Object(c.i)(e,"style",o),(!a||1&l&&i!==(i=t[7]._id))&&Object(c.i)(e,"data-phrase-id",i)},i(n){a||(Object(c.e)(()=>{b&&b.end(1),l||(l=Object(c.t)(e,A.a,It(t[7].fadeIn))),l.start()}),a=!0)},o(n){l&&l.invalidate(),b=Object(c.u)(e,A.a,It(t[7].fadeOut)),a=!1},d(t){t&&Object(c.z)(e),j&&j.d(),t&&b&&b.end()}}}function Nt(t){let e,n,s=t[7].html+"";return{c(){n=Object(c.B)(),e=new c.a(n)},m(t,r){e.m(s,t,r),Object(c.J)(t,n,r)},p(t,n){1&n&&s!==(s=t[7].html+"")&&e.p(s)},d(t){t&&Object(c.z)(n),t&&e.d()}}}function Tt(t){let e,n,s=t[7].html+"";return{c(){n=Object(c.B)(),e=new c.a(n)},m(t,r){e.m(s,t,r),Object(c.J)(t,n,r)},p(t,n){1&n&&s!==(s=t[7].html+"")&&e.p(s)},d(t){t&&Object(c.z)(n),t&&e.d()}}}function Mt(t,e){let n,s,r,o,i;const l=[_t,Ct],b=[];function a(t,e){return t[7].fadeIn||t[7].fadeOut?0:1}return s=a(e),r=b[s]=l[s](e),{key:t,first:null,c(){n=Object(c.B)(),r.c(),o=Object(c.B)(),this.first=n},m(t,e){Object(c.J)(t,n,e),b[s].m(t,e),Object(c.J)(t,o,e),i=!0},p(t,e){let n=s;s=a(t),s===n?b[s].p(t,e):(Object(c.G)(),Object(c.kb)(b[n],1,1,()=>{b[n]=null}),Object(c.m)(),r=b[s],r||(r=b[s]=l[s](t),r.c()),Object(c.jb)(r,1),r.m(o.parentNode,o))},i(t){i||(Object(c.jb)(r),i=!0)},o(t){Object(c.kb)(r),i=!1},d(t){t&&Object(c.z)(n),b[s].d(t),t&&Object(c.z)(o)}}}function Lt(t){let e,n,s,r,o,i,l,b,a;const u=[Jt,zt],j=[];function d(t,e){return t[0].phrases?0:1}return n=d(t),s=j[n]=u[n](t),{c(){e=Object(c.A)("p"),s.c(),Object(c.i)(e,"style",r=t[2](t[0])),Object(c.i)(e,"data-sub-style",o=t[0].style),Object(c.i)(e,"data-sub-id",i=t[0]._id),Object(c.i)(e,"title","click to search this phrase on Jisho.org"),Object(c.i)(e,"class","svelte-16tlrm3"),Object(c.ib)(e,"has-movement",!!t[0].movement)},m(s,r){Object(c.J)(s,e,r),j[n].m(e,null),l=!0,b||(a=Object(c.L)(e,"click",t[4]),b=!0)},p(t,[b]){let a=n;n=d(t),n===a?j[n].p(t,b):(Object(c.G)(),Object(c.kb)(j[a],1,1,()=>{j[a]=null}),Object(c.m)(),s=j[n],s||(s=j[n]=u[n](t),s.c()),Object(c.jb)(s,1),s.m(e,null)),(!l||1&b&&r!==(r=t[2](t[0])))&&Object(c.i)(e,"style",r),(!l||1&b&&o!==(o=t[0].style))&&Object(c.i)(e,"data-sub-style",o),(!l||1&b&&i!==(i=t[0]._id))&&Object(c.i)(e,"data-sub-id",i),1&b&&Object(c.ib)(e,"has-movement",!!t[0].movement)},i(t){l||(Object(c.jb)(s),l=!0)},o(t){Object(c.kb)(s),l=!1},d(t){t&&Object(c.z)(e),j[n].d(),b=!1,a()}}}function It(t){return"number"!=typeof t&&(t=0),{delay:0,duration:t}}function Et(t,e,n){let s,r;Object(c.n)(t,z.a,t=>n(5,s=t)),Object(c.n)(t,p.g,t=>n(6,r=t));let{sub:o}=e,{styles:i}=e;return t.$$set=t=>{"sub"in t&&n(0,o=t.sub),"styles"in t&&n(3,i=t.styles)},[o,function(t,e){const n=i[e.style];return Object(z.b)([`font-size: ${n.fontSize*s}vh`,t.inline,t.fontSize?`font-size: ${t.fontSize*s}vh`:null])},function(t){let e=["color: "+r];const n=i[t.style];if(e.push(n.inline),e=e.concat([t.inline||""]),t.phrases||e.push(`font-size: ${n.fontSize*s}vh`),t.movement){const n=t.movement.timings,c=t.movement.timings.length>0,s=c?n[1]-n[0]:t.end-t.start,r=c?n[0]:0;e=e.concat([`--move-duration: ${s}ms`,`--move-delay: ${r}ms`,"--move-from-top: "+t.movement.y1,"--move-from-left: "+t.movement.x1,"--move-to-top: "+t.movement.y2,"--move-to-left: "+t.movement.x2])}return Object(z.b)(e)},i,()=>Object(z.c)(o.text)]}class Pt extends c.b{constructor(t){var e;super(),document.getElementById("svelte-16tlrm3-style")||((e=Object(c.A)("style")).id="svelte-16tlrm3-style",e.textContent='p.svelte-16tlrm3{cursor:default;color:white;margin:0;padding:0;white-space:pre-wrap;font-family:"Source Han Sans", "源ノ角ゴシック", "Hiragino Sans", "HiraKakuProN-W3", "Hiragino Kaku Gothic ProN W3", "Hiragino Kaku Gothic ProN", "ヒラギノ角ゴ ProN W3", "Noto Sans", "Noto Sans CJK JP", "メイリオ", Meiryo, "游ゴシック", YuGothic, "ＭＳ Ｐゴシック", "MS PGothic", "ＭＳ ゴシック", "MS Gothic", sans-serif}p.svelte-16tlrm3:hover{color:#0aff8c !important;cursor:pointer}@keyframes svelte-16tlrm3-movement{from{top:var(--move-from-top);left:var(--move-from-left)}to{top:var(--move-to-top);left:var(--move-to-left)}}.has-movement.svelte-16tlrm3{position:fixed;animation:svelte-16tlrm3-movement var(--move-duration) linear forwards;animation-delay:var(--move-delay)}',Object(c.g)(document.head,e)),Object(c.I)(this,t,Et,Lt,c.W,{sub:0,styles:3})}}var qt=Pt;function Ft(t,e,n){const c=t.slice();return c[16]=e[n],c}function Gt(t,e,n){const c=t.slice();return c[13]=e[n],c}function Ht(t,e,n){const c=t.slice();return c[16]=e[n],c}function Bt(t,e,n){const c=t.slice();return c[10]=e[n],c}function Wt(t,e){let n,s,r;return s=new qt({props:{sub:e[16],styles:e[0]}}),s.$on("define-pauser",e[6]),{key:t,first:null,c(){n=Object(c.B)(),Object(c.s)(s.$$.fragment),this.first=n},m(t,e){Object(c.J)(t,n,e),Object(c.N)(s,t,e),r=!0},p(t,e){const n={};4&e&&(n.sub=t[16]),1&e&&(n.styles=t[0]),s.$set(n)},i(t){r||(Object(c.jb)(s.$$.fragment,t),r=!0)},o(t){Object(c.kb)(s.$$.fragment,t),r=!1},d(t){t&&Object(c.z)(n),Object(c.x)(s,t)}}}function Vt(t){let e,n,s,r=[],o=new Map,i=t[10]["an"+t[13]];const l=t=>t[16]._id;for(let e=0;e<i.length;e+=1){let n=Ft(t,i,e),c=l(n);o.set(c,r[e]=Dt(c,n))}return{c(){e=Object(c.A)("div");for(let t=0;t<r.length;t+=1)r[t].c();Object(c.i)(e,"class",n="an an"+t[13]+" svelte-1sslocw")},m(t,n){Object(c.J)(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null);s=!0},p(t,n){if(13&n){const s=t[10]["an"+t[13]];Object(c.G)(),r=Object(c.lb)(r,n,l,1,t,s,o,e,c.S,Dt,null,Ft),Object(c.m)()}},i(t){if(!s){for(let t=0;t<i.length;t+=1)Object(c.jb)(r[t]);s=!0}},o(t){for(let t=0;t<r.length;t+=1)Object(c.kb)(r[t]);s=!1},d(t){t&&Object(c.z)(e);for(let t=0;t<r.length;t+=1)r[t].d()}}}function Dt(t,e){let n,s,r;return s=new qt({props:{sub:e[16],styles:e[0]}}),s.$on("define-pauser",e[7]),{key:t,first:null,c(){n=Object(c.B)(),Object(c.s)(s.$$.fragment),this.first=n},m(t,e){Object(c.J)(t,n,e),Object(c.N)(s,t,e),r=!0},p(t,e){const n={};4&e&&(n.sub=t[16]),1&e&&(n.styles=t[0]),s.$set(n)},i(t){r||(Object(c.jb)(s.$$.fragment,t),r=!0)},o(t){Object(c.kb)(s.$$.fragment,t),r=!1},d(t){t&&Object(c.z)(n),Object(c.x)(s,t)}}}function Rt(t,e){let n,s,r,o=e[10]["an"+e[13]].length&&Vt(e);return{key:t,first:null,c(){n=Object(c.B)(),o&&o.c(),s=Object(c.B)(),this.first=n},m(t,e){Object(c.J)(t,n,e),o&&o.m(t,e),Object(c.J)(t,s,e),r=!0},p(t,e){t[10]["an"+t[13]].length?o?(o.p(t,e),4&e&&Object(c.jb)(o,1)):(o=Vt(t),o.c(),Object(c.jb)(o,1),o.m(s.parentNode,s)):o&&(Object(c.G)(),Object(c.kb)(o,1,1,()=>{o=null}),Object(c.m)())},i(t){r||(Object(c.jb)(o),r=!0)},o(t){Object(c.kb)(o),r=!1},d(t){t&&Object(c.z)(n),o&&o.d(t),t&&Object(c.z)(s)}}}function Zt(t,e){let n,s,r,o,i,l=[],b=new Map,a=[],u=new Map,j=e[10].positioned;const d=t=>t[16]._id;for(let t=0;t<j.length;t+=1){let n=Ht(e,j,t),c=d(n);b.set(c,l[t]=Wt(c,n))}let O=e[3];const f=t=>t[13];for(let t=0;t<O.length;t+=1){let n=Gt(e,O,t),c=f(n);u.set(c,a[t]=Rt(c,n))}return{key:t,first:null,c(){n=Object(c.A)("div");for(let t=0;t<l.length;t+=1)l[t].c();s=Object(c.cb)();for(let t=0;t<a.length;t+=1)a[t].c();r=Object(c.cb)(),Object(c.i)(n,"data-ass-layer",o=e[10].level),Object(c.bb)(n,"position","absolute"),Object(c.bb)(n,"z-index",e[10].level),this.first=n},m(t,e){Object(c.J)(t,n,e);for(let t=0;t<l.length;t+=1)l[t].m(n,null);Object(c.g)(n,s);for(let t=0;t<a.length;t+=1)a[t].m(n,null);Object(c.g)(n,r),i=!0},p(t,e){if(5&e){const r=t[10].positioned;Object(c.G)(),l=Object(c.lb)(l,e,d,1,t,r,b,n,c.S,Wt,s,Ht),Object(c.m)()}if(13&e){const s=t[3];Object(c.G)(),a=Object(c.lb)(a,e,f,1,t,s,u,n,c.S,Rt,r,Gt),Object(c.m)()}(!i||4&e&&o!==(o=t[10].level))&&Object(c.i)(n,"data-ass-layer",o),(!i||4&e)&&Object(c.bb)(n,"z-index",t[10].level)},i(t){if(!i){for(let t=0;t<j.length;t+=1)Object(c.jb)(l[t]);for(let t=0;t<O.length;t+=1)Object(c.jb)(a[t]);i=!0}},o(t){for(let t=0;t<l.length;t+=1)Object(c.kb)(l[t]);for(let t=0;t<a.length;t+=1)Object(c.kb)(a[t]);i=!1},d(t){t&&Object(c.z)(n);for(let t=0;t<l.length;t+=1)l[t].d();for(let t=0;t<a.length;t+=1)a[t].d()}}}function Kt(t){let e,n,s=[],r=new Map,o=t[2];const i=t=>t[10].level;for(let e=0;e<o.length;e+=1){let n=Bt(t,o,e),c=i(n);r.set(c,s[e]=Zt(c,n))}return{c(){e=Object(c.A)("div");for(let t=0;t<s.length;t+=1)s[t].c();Object(c.i)(e,"class","subtitles svelte-1sslocw"),Object(c.ib)(e,"non-actionable",!t[1])},m(t,r){Object(c.J)(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){if(13&n){const o=t[2];Object(c.G)(),s=Object(c.lb)(s,n,i,1,t,o,r,e,c.S,Zt,null,Bt),Object(c.m)()}2&n&&Object(c.ib)(e,"non-actionable",!t[1])},i(t){if(!n){for(let t=0;t<o.length;t+=1)Object(c.jb)(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)Object(c.kb)(s[t]);n=!1},d(t){t&&Object(c.z)(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function Yt(t,e,n){let s,r,o;Object(c.n)(t,p.c,t=>n(8,s=t)),Object(c.n)(t,z.d,t=>n(1,r=t));let{subtitles:i}=e,{styles:l={}}=e;const b={1:7,2:8,3:9,4:4,5:5,6:6,7:1,8:2,9:3},a=Object(f.a)(i,t=>{const e={};for(const n of t){const t="positioned"===n.mountPoint?n.mountPoint:"an"+(s?b[n.mountPoint]:n.mountPoint);e[n.layer]||(e[n.layer]={level:n.layer,positioned:[],an1:[],an2:[],an3:[],an4:[],an5:[],an6:[],an7:[],an8:[],an9:[]}),e[n.layer][t].push(n)}return Object.values(e)});return Object(c.n)(t,a,t=>n(2,o=t)),t.$$set=t=>{"subtitles"in t&&n(5,i=t.subtitles),"styles"in t&&n(0,l=t.styles)},[l,r,o,[1,2,3,4,5,6,7,8,9],a,i,function(e){Object(c.l)(t,e)},function(e){Object(c.l)(t,e)}]}class Ut extends c.b{constructor(t){var e;super(),document.getElementById("svelte-1sslocw-style")||((e=Object(c.A)("style")).id="svelte-1sslocw-style",e.textContent=".an.svelte-1sslocw{position:fixed;width:100%;max-width:100vw;display:flex;flex-direction:column;padding:0.8rem}.an1.svelte-1sslocw{top:100vh;left:0;transform:translate(0, -100%)}.an2.svelte-1sslocw{top:100vh;left:50vw;transform:translate(-50%, -100%)}.an3.svelte-1sslocw{top:100vh;left:100vw;transform:translate(-100%, -100%)}.an4.svelte-1sslocw{top:50vh;left:0;transform:translate(0, -50%)}.an5.svelte-1sslocw{top:50vh;left:50vw;transform:translate(-50%, -50%)}.an6.svelte-1sslocw{top:50vh;left:100vw;transform:translate(-100%, -50%)}.an7.svelte-1sslocw{top:0;left:0;transform:translate(0, 0)}.an8.svelte-1sslocw{top:0;left:50vw;transform:translate(-50%, 0)}.an9.svelte-1sslocw{top:0;left:100vw;transform:translate(-100%, 0)}.an1.svelte-1sslocw,.an4.svelte-1sslocw,.an7.svelte-1sslocw{text-align:left}.an2.svelte-1sslocw,.an5.svelte-1sslocw,.an8.svelte-1sslocw{text-align:center}.an3.svelte-1sslocw,.an6.svelte-1sslocw,.an9.svelte-1sslocw{text-align:right}.an1.svelte-1sslocw,.an2.svelte-1sslocw,.an3.svelte-1sslocw{flex-direction:column-reverse}.non-actionable.svelte-1sslocw{pointer-events:none}",Object(c.g)(document.head,e)),Object(c.I)(this,t,Yt,Kt,c.W,{subtitles:5,styles:0})}}var Xt=Ut,Qt=n(21),te=n(13);function ee(t,e,n){const c=t.slice();return c[6]=e[n],c}function ne(t){let e,n,s,r,o,i,l,b=t[6].title+"",a=t[6].language+"";function u(...e){return t[3](t[6],...e)}return{c(){e=Object(c.A)("button"),n=Object(c.gb)(b),s=Object(c.gb)(" ("),r=Object(c.gb)(a),o=Object(c.gb)(")\n\t\t"),Object(c.i)(e,"class","secondary svelte-1n5tabm")},m(t,b){Object(c.J)(t,e,b),Object(c.g)(e,n),Object(c.g)(e,s),Object(c.g)(e,r),Object(c.g)(e,o),i||(l=Object(c.L)(e,"click",u),i=!0)},p(e,n){t=e},d(t){t&&Object(c.z)(e),i=!1,l()}}}function ce(t){let e,n,s,r,o,i,l,b,a,u=window.jimakuProvidedSubtitles||[],j=[];for(let e=0;e<u.length;e+=1)j[e]=ne(ee(t,u,e));return{c(){e=Object(c.A)("div"),n=Object(c.A)("button"),n.textContent="⨯ Skip Subtitling For This Episode",s=Object(c.cb)(),r=Object(c.A)("label"),r.textContent="≡ Select a subtitle file to begin",o=Object(c.cb)(),i=Object(c.A)("input"),l=Object(c.cb)();for(let t=0;t<j.length;t+=1)j[t].c();Object(c.i)(n,"class","small-button secondary svelte-1n5tabm"),Object(c.i)(r,"for","srt-upload"),Object(c.i)(r,"class","svelte-1n5tabm"),Object(c.i)(i,"type","file"),Object(c.i)(i,"id","srt-upload"),Object(c.i)(i,"accept",".srt,.ass,.ssa,.vtt"),Object(c.i)(i,"class","svelte-1n5tabm"),Object(c.i)(e,"class","column svelte-1n5tabm")},m(u,d){Object(c.J)(u,e,d),Object(c.g)(e,n),Object(c.g)(e,s),Object(c.g)(e,r),Object(c.g)(e,o),Object(c.g)(e,i),Object(c.g)(e,l);for(let t=0;t<j.length;t+=1)j[t].m(e,null);b||(a=[Object(c.L)(n,"click",t[2]),Object(c.L)(i,"change",t[0])],b=!0)},p(t,[n]){if(2&n){let c;for(u=window.jimakuProvidedSubtitles||[],c=0;c<u.length;c+=1){const s=ee(t,u,c);j[c]?j[c].p(s,n):(j[c]=ne(s),j[c].c(),j[c].m(e,null))}for(;c<j.length;c+=1)j[c].d(1);j.length=u.length}},i:c.O,o:c.O,d(t){t&&Object(c.z)(e),Object(c.y)(j,t),b=!1,Object(c.V)(a)}}}function se(t){const e=Object(s.a)();function n(t){c(t.format,t.content,t.title,!0)}function c(t,n,c,s=!1){const r={ass:Qt.ASS,ssa:Qt.ASS,srt:te.a,vtt:te.a};e("subtitles-loaded",{skipAlignment:s,subtitles:new r[t](n,c)})}return[function(t){const e=t.target.files[0],n=new FileReader;n.onload=t=>{const[n,s]=e.name.match(/\.(\w{3})$/);c(s,t.target.result,e.name)},n.readAsText(e)},n,function(){e("cancel")},t=>n(t)]}class re extends c.b{constructor(t){var e;super(),document.getElementById("svelte-1n5tabm-style")||((e=Object(c.A)("style")).id="svelte-1n5tabm-style",e.textContent=".column.svelte-1n5tabm.svelte-1n5tabm{display:flex;flex-direction:column}.column.svelte-1n5tabm>.svelte-1n5tabm{align-self:center;margin:0.5rem}label.svelte-1n5tabm.svelte-1n5tabm{background:#fd0;border:none;cursor:pointer;padding:10px;line-height:1;font-weight:bold;color:black;text-transform:uppercase;display:inline-block;font-size:1.2rem}label.svelte-1n5tabm.svelte-1n5tabm:hover{background:#ffea6d}input.svelte-1n5tabm.svelte-1n5tabm{display:none}",Object(c.g)(document.head,e)),Object(c.I)(this,t,se,ce,c.W,{})}}var oe=re;const{document:ie}=c.F;function le(t,e,n){const c=t.slice();return c[29]=e[n],c}function be(t,e,n){const c=t.slice();return c[26]=e[n],c}function ae(t){let e;return{c(){e=Object(c.gb)("← Back")},m(t,n){Object(c.J)(t,e,n)},d(t){t&&Object(c.z)(e)}}}function ue(t){let e;return{c(){e=Object(c.gb)("↺ Reselect Subtitles")},m(t,n){Object(c.J)(t,e,n)},d(t){t&&Object(c.z)(e)}}}function je(t){let e,n,s,r,o,i,l,b,a,u,j,d,O;return{c(){e=Object(c.A)("div"),n=Object(c.A)("form"),s=Object(c.A)("label"),s.textContent="Offset subtitle display times (in seconds):",r=Object(c.cb)(),o=Object(c.A)("div"),i=Object(c.A)("input"),b=Object(c.cb)(),a=Object(c.A)("button"),a.textContent="Use this",u=Object(c.cb)(),j=Object(c.A)("p"),j.textContent="Positive numbers will delay subtitles.\n\t\t\t\t\tNegative numbers will show the subtitles earlier.",Object(c.i)(s,"for","manual-alignment"),Object(c.i)(s,"class","svelte-xgf48k"),Object(c.i)(i,"type","text"),Object(c.i)(i,"id","manual-alignment"),Object(c.i)(i,"autocomplete","off"),Object(c.i)(i,"class","svelte-xgf48k"),Object(c.i)(a,"class","svelte-xgf48k"),Object(c.i)(o,"class","row svelte-xgf48k"),Object(c.i)(n,"class","column svelte-xgf48k"),Object(c.i)(j,"class","alignment-sign-hint svelte-xgf48k"),Object(c.i)(e,"class","column svelte-xgf48k")},m(f,p){Object(c.J)(f,e,p),Object(c.g)(e,n),Object(c.g)(n,s),Object(c.g)(n,r),Object(c.g)(n,o),Object(c.g)(o,i),Object(c.ab)(i,t[1]),Object(c.g)(o,b),Object(c.g)(o,a),Object(c.g)(e,u),Object(c.g)(e,j),d||(O=[Object(c.L)(i,"input",t[23]),Object(c.L)(i,"keydown",t[10]),Object(c.c)(l=we.call(null,i)),Object(c.L)(n,"submit",Object(c.T)(t[11]))],d=!0)},p(t,e){2&e[0]&&i.value!==t[1]&&Object(c.ab)(i,t[1])},i:c.O,o:c.O,d(t){t&&Object(c.z)(e),d=!1,Object(c.V)(O)}}}function de(t){let e,n,s,r,o,i,l,b,a,u,j,d,O,f,p,g=0===t[0].length&&fe(t),m=t[0],h=[];for(let e=0;e<m.length;e+=1)h[e]=he(be(t,m,e));return{c(){e=Object(c.A)("label"),n=Object(c.gb)("Can't find a line? Search all subtitles:\n\t\t\t\t"),s=Object(c.A)("br"),r=Object(c.cb)(),o=Object(c.A)("input"),i=Object(c.cb)(),l=Object(c.A)("fieldset"),b=Object(c.A)("legend"),b.textContent="Click a subtitle as soon as you hear it said",a=Object(c.cb)(),u=Object(c.A)("div"),g&&g.c(),j=Object(c.cb)();for(let t=0;t<h.length;t+=1)h[t].c();d=Object(c.cb)(),O=Object(c.A)("button"),O.textContent="Or manually enter an offset...",Object(c.i)(o,"type","text"),Object(c.i)(o,"placeholder","type something you heard"),Object(c.i)(o,"class","svelte-xgf48k"),Object(c.i)(e,"id","subtitle-search"),Object(c.i)(e,"class","svelte-xgf48k"),Object(c.i)(b,"class","svelte-xgf48k"),Object(c.i)(u,"id","subtitle-options"),Object(c.i)(u,"class","column svelte-xgf48k"),Object(c.i)(l,"class","svelte-xgf48k"),Object(c.i)(O,"class","secondary svelte-xgf48k")},m(m,x){Object(c.J)(m,e,x),Object(c.g)(e,n),Object(c.g)(e,s),Object(c.g)(e,r),Object(c.g)(e,o),Object(c.ab)(o,t[3]),Object(c.J)(m,i,x),Object(c.J)(m,l,x),Object(c.g)(l,b),Object(c.g)(l,a),Object(c.g)(l,u),g&&g.m(u,null),Object(c.g)(u,j);for(let t=0;t<h.length;t+=1)h[t].m(u,null);Object(c.J)(m,d,x),Object(c.J)(m,O,x),f||(p=[Object(c.L)(o,"input",t[19]),Object(c.L)(O,"click",t[22])],f=!0)},p(t,e){if(8&e[0]&&o.value!==t[3]&&Object(c.ab)(o,t[3]),0===t[0].length?g?g.p(t,e):(g=fe(t),g.c(),g.m(u,j)):g&&(g.d(1),g=null),8193&e[0]){let n;for(m=t[0],n=0;n<m.length;n+=1){const c=be(t,m,n);h[n]?h[n].p(c,e):(h[n]=he(c),h[n].c(),h[n].m(u,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=m.length}},i:c.O,o:c.O,d(t){t&&Object(c.z)(e),t&&Object(c.z)(i),t&&Object(c.z)(l),g&&g.d(),Object(c.y)(h,t),t&&Object(c.z)(d),t&&Object(c.z)(O),f=!1,Object(c.V)(p)}}}function Oe(t){let e,n,s,r,o,i,l;function b(t,e){return t[4]?ve:xe}let a=b(t),u=a(t),j=t[6].length&&ye(t);return{c(){u.c(),e=Object(c.cb)(),n=Object(c.A)("button"),n.textContent="Choose a different alignment...",s=Object(c.cb)(),j&&j.c(),r=Object(c.B)(),Object(c.i)(n,"class","secondary svelte-xgf48k")},m(b,a){u.m(b,a),Object(c.J)(b,e,a),Object(c.J)(b,n,a),Object(c.J)(b,s,a),j&&j.m(b,a),Object(c.J)(b,r,a),o=!0,i||(l=Object(c.L)(n,"click",t[18]),i=!0)},p(t,n){a===(a=b(t))&&u?u.p(t,n):(u.d(1),u=a(t),u&&(u.c(),u.m(e.parentNode,e))),t[6].length?j?(j.p(t,n),64&n[0]&&Object(c.jb)(j,1)):(j=ye(t),j.c(),Object(c.jb)(j,1),j.m(r.parentNode,r)):j&&(Object(c.G)(),Object(c.kb)(j,1,1,()=>{j=null}),Object(c.m)())},i(t){o||(Object(c.jb)(j),o=!0)},o(t){Object(c.kb)(j),o=!1},d(t){u.d(t),t&&Object(c.z)(e),t&&Object(c.z)(n),t&&Object(c.z)(s),j&&j.d(t),t&&Object(c.z)(r),i=!1,l()}}}function fe(t){let e,n,s,r;return{c(){e=Object(c.A)("p"),n=Object(c.gb)('No subtitles matching "'),s=Object(c.gb)(t[3]),r=Object(c.gb)('".'),Object(c.i)(e,"class","svelte-xgf48k")},m(t,o){Object(c.J)(t,e,o),Object(c.g)(e,n),Object(c.g)(e,s),Object(c.g)(e,r)},p(t,e){8&e[0]&&Object(c.Z)(s,t[3])},d(t){t&&Object(c.z)(e)}}}function pe(t){let e,n,s,r,o,i,l,b,a,u=t[26].offset+"",j=t[26].text.trim()+"";function d(...e){return t[21](t[26],...e)}return{c(){e=Object(c.A)("button"),n=Object(c.gb)("("),s=Object(c.gb)(u),r=Object(c.gb)(")"),o=Object(c.A)("br"),i=Object(c.gb)(j),l=Object(c.cb)(),Object(c.i)(e,"class","svelte-xgf48k")},m(t,u){Object(c.J)(t,e,u),Object(c.g)(e,n),Object(c.g)(e,s),Object(c.g)(e,r),Object(c.g)(e,o),Object(c.g)(e,i),Object(c.g)(e,l),b||(a=Object(c.L)(e,"click",d),b=!0)},p(e,n){t=e,1&n[0]&&u!==(u=t[26].offset+"")&&Object(c.Z)(s,u),1&n[0]&&j!==(j=t[26].text.trim()+"")&&Object(c.Z)(i,j)},d(t){t&&Object(c.z)(e),b=!1,a()}}}function ge(t){let e,n,s,r,o,i,l,b=t[26].sub.text.trim()+"",a=t[26].subsequent,u=[];for(let e=0;e<a.length;e+=1)u[e]=me(le(t,a,e));return{c(){e=Object(c.A)("div"),n=Object(c.A)("fieldset"),s=Object(c.A)("legend"),r=Object(c.gb)(b),o=Object(c.cb)(),i=Object(c.A)("div");for(let t=0;t<u.length;t+=1)u[t].c();l=Object(c.cb)(),Object(c.i)(s,"class","svelte-xgf48k"),Object(c.i)(i,"class","column svelte-xgf48k"),Object(c.i)(n,"class","svelte-xgf48k"),Object(c.i)(e,"class","search-match svelte-xgf48k")},m(t,b){Object(c.J)(t,e,b),Object(c.g)(e,n),Object(c.g)(n,s),Object(c.g)(s,r),Object(c.g)(n,o),Object(c.g)(n,i);for(let t=0;t<u.length;t+=1)u[t].m(i,null);Object(c.g)(e,l)},p(t,e){if(1&e[0]&&b!==(b=t[26].sub.text.trim()+"")&&Object(c.Z)(r,b),8193&e[0]){let n;for(a=t[26].subsequent,n=0;n<a.length;n+=1){const c=le(t,a,n);u[n]?u[n].p(c,e):(u[n]=me(c),u[n].c(),u[n].m(i,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=a.length}},d(t){t&&Object(c.z)(e),Object(c.y)(u,t)}}}function me(t){let e,n,s,r,o,i,l,b,a,u=t[29].offset+"",j=t[29].text.trim()+"";function d(...e){return t[20](t[29],...e)}return{c(){e=Object(c.A)("button"),n=Object(c.gb)("("),s=Object(c.gb)(u),r=Object(c.gb)(")"),o=Object(c.A)("br"),i=Object(c.gb)(j),l=Object(c.cb)(),Object(c.i)(e,"class","svelte-xgf48k")},m(t,u){Object(c.J)(t,e,u),Object(c.g)(e,n),Object(c.g)(e,s),Object(c.g)(e,r),Object(c.g)(e,o),Object(c.g)(e,i),Object(c.g)(e,l),b||(a=Object(c.L)(e,"click",d),b=!0)},p(e,n){t=e,1&n[0]&&u!==(u=t[29].offset+"")&&Object(c.Z)(s,u),1&n[0]&&j!==(j=t[29].text.trim()+"")&&Object(c.Z)(i,j)},d(t){t&&Object(c.z)(e),b=!1,a()}}}function he(t){let e;function n(t,e){return"search-match"===t[26].type?ge:pe}let s=n(t),r=s(t);return{c(){r.c(),e=Object(c.B)()},m(t,n){r.m(t,n),Object(c.J)(t,e,n)},p(t,c){s===(s=n(t))&&r?r.p(t,c):(r.d(1),r=s(t),r&&(r.c(),r.m(e.parentNode,e)))},d(t){r.d(t),t&&Object(c.z)(e)}}}function xe(t){let e,n,s,r,o;return{c(){e=Object(c.A)("p"),e.textContent="You haven't set an alignment for this show before",n=Object(c.cb)(),s=Object(c.A)("button"),s.textContent="Assume subtitles are properly timed",Object(c.i)(e,"class","svelte-xgf48k"),Object(c.i)(s,"class","svelte-xgf48k")},m(i,l){Object(c.J)(i,e,l),Object(c.J)(i,n,l),Object(c.J)(i,s,l),r||(o=Object(c.L)(s,"click",t[17]),r=!0)},p:c.O,d(t){t&&Object(c.z)(e),t&&Object(c.z)(n),t&&Object(c.z)(s),r=!1,o()}}}function ve(t){let e,n,s,r,o,i,l,b,a,u=t[7]&&function(t){let e,n;return{c(){e=Object(c.gb)("for "),n=Object(c.A)("span"),n.textContent=""+t[7],Object(c.i)(n,"class","show-name svelte-xgf48k")},m(t,s){Object(c.J)(t,e,s),Object(c.J)(t,n,s)},p:c.O,d(t){t&&Object(c.z)(e),t&&Object(c.z)(n)}}}(t);return{c(){e=Object(c.A)("button"),n=Object(c.gb)("Use the last alignment\n\t\t\t\t\t\n\t\t\t\t\t"),u&&u.c(),s=Object(c.cb)(),r=Object(c.A)("br"),o=Object(c.gb)("\n\t\t\t\t\t("),i=Object(c.gb)(t[5]),l=Object(c.gb)(")"),Object(c.i)(e,"class","svelte-xgf48k")},m(j,d){Object(c.J)(j,e,d),Object(c.g)(e,n),u&&u.m(e,null),Object(c.g)(e,s),Object(c.g)(e,r),Object(c.g)(e,o),Object(c.g)(e,i),Object(c.g)(e,l),b||(a=Object(c.L)(e,"click",t[12]),b=!0)},p(t,e){t[7]&&u.p(t,e),32&e[0]&&Object(c.Z)(i,t[5])},d(t){t&&Object(c.z)(e),u&&u.d(),b=!1,a()}}}function ye(t){let e,n,s,r;return s=new Z({}),s.$on("aligned",t[15]),{c(){e=Object(c.A)("h2"),e.textContent="Other Recently Used Alignments",n=Object(c.cb)(),Object(c.s)(s.$$.fragment),Object(c.i)(e,"class","svelte-xgf48k")},m(t,o){Object(c.J)(t,e,o),Object(c.J)(t,n,o),Object(c.N)(s,t,o),r=!0},p:c.O,i(t){r||(Object(c.jb)(s.$$.fragment,t),r=!0)},o(t){Object(c.kb)(s.$$.fragment,t),r=!1},d(t){t&&Object(c.z)(e),t&&Object(c.z)(n),Object(c.x)(s,t)}}}function ke(t){let e,n,s,r,o,i,l,b,a,u,j;function d(t,e){return t[2]===t[8].entry?ue:ae}let O=d(t),f=O(t);const p=[Oe,de,je],g=[];function m(t,e){return t[2]===t[8].entry?0:t[2]===t[8].automatic?1:t[2]===t[8].manual?2:-1}return~(l=m(t))&&(b=g[l]=p[l](t)),{c(){e=Object(c.A)("div"),n=Object(c.A)("div"),s=Object(c.A)("button"),f.c(),r=Object(c.cb)(),o=Object(c.A)("h1"),o.textContent="Alignment Adjustment",i=Object(c.cb)(),b&&b.c(),Object(c.i)(s,"class","small-button secondary svelte-xgf48k"),Object(c.i)(o,"class","svelte-xgf48k"),Object(c.i)(n,"class","alignment-panel svelte-xgf48k"),Object(c.i)(e,"class","column svelte-xgf48k")},m(b,d){Object(c.J)(b,e,d),Object(c.g)(e,n),Object(c.g)(n,s),f.m(s,null),Object(c.g)(n,r),Object(c.g)(n,o),Object(c.g)(n,i),~l&&g[l].m(n,null),a=!0,u||(j=Object(c.L)(s,"click",t[9]),u=!0)},p(t,e){O!==(O=d(t))&&(f.d(1),f=O(t),f&&(f.c(),f.m(s,null)));let r=l;l=m(t),l===r?~l&&g[l].p(t,e):(b&&(Object(c.G)(),Object(c.kb)(g[r],1,1,()=>{g[r]=null}),Object(c.m)()),~l?(b=g[l],b||(b=g[l]=p[l](t),b.c()),Object(c.jb)(b,1),b.m(n,null)):b=null)},i(t){a||(Object(c.jb)(b),a=!0)},o(t){Object(c.kb)(b),a=!1},d(t){t&&Object(c.z)(e),f.d(),~l&&g[l].d(),u=!1,j()}}}function we(t){t.focus(),t.select()}function $e(t,e,n){let r,o,i;Object(c.n)(t,x.d,t=>n(4,r=t)),Object(c.n)(t,x.c,t=>n(5,o=t)),Object(c.n)(t,x.a,t=>n(6,i=t));let{subtitles:l}=e;const b=Object(s.a)(),a=Object(f.b)(x.g),u={entry:"entry",manual:"manual",automatic:"automatic"};let j=l.getAlignmentCandidates(),d=Object(f.b)(x.f),O=j[0],p=u.entry,g="";function m(){const t=parseFloat(d);isNaN(t)?alert("Please enter a valid number!"):v(1e3*t)}function h(t){O=t,v()}function v(t){const e=document.querySelector("video"),n="number"==typeof t?t:1e3*e.currentTime-O.start-400;x.b.set(n),Object(x.e)(n),y()}function y(){b("done")}return t.$$set=t=>{"subtitles"in t&&n(16,l=t.subtitles)},t.$$.update=()=>{65544&t.$$.dirty[0]&&n(0,j=l.getAlignmentCandidates(g))},[j,d,p,g,r,o,i,a,u,function(){p!==u.entry?n(2,p=p===u.automatic?u.entry:u.automatic):b("reselect")},function(t){t.stopPropagation(),"Enter"===t.key&&m()},m,function(){v(Object(f.b)(x.b))},h,v,y,l,()=>v(0),()=>n(2,p=u.automatic),function(){g=this.value,n(3,g)},t=>h(t),t=>h(t),()=>n(2,p=u.manual),function(){d=this.value,n(1,d)}]}class Ae extends c.b{constructor(t){var e;super(),ie.getElementById("svelte-xgf48k-style")||((e=Object(c.A)("style")).id="svelte-xgf48k-style",e.textContent=".column.svelte-xgf48k.svelte-xgf48k{display:flex;flex-direction:column;text-align:center}button.svelte-xgf48k.svelte-xgf48k{margin:0.5rem;align-self:center;max-width:20rem}.row.svelte-xgf48k.svelte-xgf48k{display:flex;flex-direction:row;justify-content:center;align-content:center}.row.svelte-xgf48k button.svelte-xgf48k{max-width:15rem}.show-name.svelte-xgf48k.svelte-xgf48k{font-style:italic}.alignment-panel.svelte-xgf48k.svelte-xgf48k{background:rgba(27, 26, 38, 0.9);align-self:center;padding:0.5rem;display:flex;flex-direction:column;border-radius:4px;justify-content:center;max-height:80vh;left:50vw;transform:translateX(-50%);position:absolute}fieldset.svelte-xgf48k.svelte-xgf48k{overflow:auto}.alignment-panel.svelte-xgf48k>.svelte-xgf48k:not(select):not(button){color:white}h1.svelte-xgf48k.svelte-xgf48k{margin:0}h1.svelte-xgf48k.svelte-xgf48k{font-size:1.3rem;border-bottom:2px solid #f47521}h2.svelte-xgf48k.svelte-xgf48k{font-size:0.9rem}p.svelte-xgf48k.svelte-xgf48k,label.svelte-xgf48k.svelte-xgf48k{max-width:14rem}.alignment-sign-hint.svelte-xgf48k.svelte-xgf48k{font-size:0.8rem}#manual-alignment.svelte-xgf48k.svelte-xgf48k{width:5rem;align-self:center}@media(max-width: 700px){button.svelte-xgf48k.svelte-xgf48k,input.svelte-xgf48k.svelte-xgf48k,label.svelte-xgf48k.svelte-xgf48k,legend.svelte-xgf48k.svelte-xgf48k,p.svelte-xgf48k.svelte-xgf48k{font-size:0.7rem !important;margin:0.2rem}.alignment-sign-hint.svelte-xgf48k.svelte-xgf48k{font-size:0.6rem}button.svelte-xgf48k.svelte-xgf48k{padding:4px}h1.svelte-xgf48k.svelte-xgf48k{font-size:1rem}h2.svelte-xgf48k.svelte-xgf48k{font-size:0.9rem}#subtitle-options.svelte-xgf48k.svelte-xgf48k{max-height:30vh}}h2.svelte-xgf48k.svelte-xgf48k{margin:0}p.svelte-xgf48k.svelte-xgf48k{align-self:center}.search-match.svelte-xgf48k.svelte-xgf48k:not(:last-child){margin-bottom:1rem}.search-match.svelte-xgf48k legend.svelte-xgf48k{white-space:pre;margin:0 auto}#subtitle-search.svelte-xgf48k.svelte-xgf48k{align-self:center;max-width:100%}",Object(c.g)(ie.head,e)),Object(c.I)(this,t,$e,ke,c.W,{subtitles:16},[-1,-1])}}var Se=Ae;function ze(t){let e,n;return{c:c.O,m(s,r){e||(n=Object(c.L)(window,"keydown",t[0]),e=!0)},p:c.O,i:c.O,o:c.O,d(t){e=!1,n()}}}function Je(t){return[function(t){const e=t.key.toLowerCase();"h"===e?p.e.update(t=>!t):"i"===e&&p.c.update(t=>!t)}]}class Ce extends c.b{constructor(t){super(),Object(c.I)(this,t,Je,ze,c.W,{})}}var _e=Ce,Ne=n(9);const{document:Te}=c.F;function Me(t){let e,n;return e=new $t({props:{mode:"cancelled"}}),e.$on("restart",t[5]),{c(){Object(c.s)(e.$$.fragment)},m(t,s){Object(c.N)(e,t,s),n=!0},p:c.O,i(t){n||(Object(c.jb)(e.$$.fragment,t),n=!0)},o(t){Object(c.kb)(e.$$.fragment,t),n=!1},d(t){Object(c.x)(e,t)}}}function Le(t){let e,n,s,r=t[4]&&Pe(t);return n=new $t({props:{recentSubs:t[2],subtitles:t[1]}}),n.$on("restart",t[5]),n.$on("tray-pauser",t[8]),n.$on("realign",t[11]),{c(){r&&r.c(),e=Object(c.cb)(),Object(c.s)(n.$$.fragment)},m(t,o){r&&r.m(t,o),Object(c.J)(t,e,o),Object(c.N)(n,t,o),s=!0},p(t,s){t[4]?r?(r.p(t,s),16&s&&Object(c.jb)(r,1)):(r=Pe(t),r.c(),Object(c.jb)(r,1),r.m(e.parentNode,e)):r&&(Object(c.G)(),Object(c.kb)(r,1,1,()=>{r=null}),Object(c.m)());const o={};4&s&&(o.recentSubs=t[2]),2&s&&(o.subtitles=t[1]),n.$set(o)},i(t){s||(Object(c.jb)(r),Object(c.jb)(n.$$.fragment,t),s=!0)},o(t){Object(c.kb)(r),Object(c.kb)(n.$$.fragment,t),s=!1},d(t){r&&r.d(t),t&&Object(c.z)(e),Object(c.x)(n,t)}}}function Ie(t){let e,n;return e=new Se({props:{subtitles:t[1]}}),e.$on("done",t[6]),e.$on("reselect",t[10]),{c(){Object(c.s)(e.$$.fragment)},m(t,s){Object(c.N)(e,t,s),n=!0},p(t,n){const c={};2&n&&(c.subtitles=t[1]),e.$set(c)},i(t){n||(Object(c.jb)(e.$$.fragment,t),n=!0)},o(t){Object(c.kb)(e.$$.fragment,t),n=!1},d(t){Object(c.x)(e,t)}}}function Ee(t){let e,n;return e=new oe({}),e.$on("subtitles-loaded",t[7]),e.$on("cancel",t[9]),{c(){Object(c.s)(e.$$.fragment)},m(t,s){Object(c.N)(e,t,s),n=!0},p:c.O,i(t){n||(Object(c.jb)(e.$$.fragment,t),n=!0)},o(t){Object(c.kb)(e.$$.fragment,t),n=!1},d(t){Object(c.x)(e,t)}}}function Pe(t){let e,n,s,r;const o=[Fe,qe],i=[];function l(t,e){return"subrip"===t[1].format?0:"ass"===t[1].format?1:-1}return~(e=l(t))&&(n=i[e]=o[e](t)),{c(){n&&n.c(),s=Object(c.B)()},m(t,n){~e&&i[e].m(t,n),Object(c.J)(t,s,n),r=!0},p(t,r){let b=e;e=l(t),e===b?~e&&i[e].p(t,r):(n&&(Object(c.G)(),Object(c.kb)(i[b],1,1,()=>{i[b]=null}),Object(c.m)()),~e?(n=i[e],n||(n=i[e]=o[e](t),n.c()),Object(c.jb)(n,1),n.m(s.parentNode,s)):n=null)},i(t){r||(Object(c.jb)(n),r=!0)},o(t){Object(c.kb)(n),r=!1},d(t){~e&&i[e].d(t),t&&Object(c.z)(s)}}}function qe(t){let e,n;return e=new Xt({props:{format:t[1].format,styles:t[1].styles,subtitles:t[3]}}),{c(){Object(c.s)(e.$$.fragment)},m(t,s){Object(c.N)(e,t,s),n=!0},p(t,n){const c={};2&n&&(c.format=t[1].format),2&n&&(c.styles=t[1].styles),8&n&&(c.subtitles=t[3]),e.$set(c)},i(t){n||(Object(c.jb)(e.$$.fragment,t),n=!0)},o(t){Object(c.kb)(e.$$.fragment,t),n=!1},d(t){Object(c.x)(e,t)}}}function Fe(t){let e,n;return e=new At.a({props:{format:t[1].format,subtitles:t[3]}}),{c(){Object(c.s)(e.$$.fragment)},m(t,s){Object(c.N)(e,t,s),n=!0},p(t,n){const c={};2&n&&(c.format=t[1].format),8&n&&(c.subtitles=t[3]),e.$set(c)},i(t){n||(Object(c.jb)(e.$$.fragment,t),n=!0)},o(t){Object(c.kb)(e.$$.fragment,t),n=!1},d(t){Object(c.x)(e,t)}}}function Ge(t){let e,n,s,r,o,i;const l=[Ee,Ie,Le,Me],b=[];function a(t,e){return"prompt"===t[0]?0:"align"===t[0]?1:"play"===t[0]?2:"cancelled"===t[0]?3:-1}return~(n=a(t))&&(s=b[n]=l[n](t)),o=new _e({}),{c(){e=Object(c.A)("div"),s&&s.c(),r=Object(c.cb)(),Object(c.s)(o.$$.fragment),Object(c.i)(e,"class","subtitles-app svelte-14avfc4")},m(t,s){Object(c.J)(t,e,s),~n&&b[n].m(e,null),Object(c.J)(t,r,s),Object(c.N)(o,t,s),i=!0},p(t,[r]){let o=n;n=a(t),n===o?~n&&b[n].p(t,r):(s&&(Object(c.G)(),Object(c.kb)(b[o],1,1,()=>{b[o]=null}),Object(c.m)()),~n?(s=b[n],s||(s=b[n]=l[n](t),s.c()),Object(c.jb)(s,1),s.m(e,null)):s=null)},i(t){i||(Object(c.jb)(s),Object(c.jb)(o.$$.fragment,t),i=!0)},o(t){Object(c.kb)(s),Object(c.kb)(o.$$.fragment,t),i=!1},d(t){t&&Object(c.z)(e),~n&&b[n].d(),t&&Object(c.z)(r),Object(c.x)(o,t)}}}function He(t,e,n){let r,o;Object(c.n)(t,p.a,t=>n(16,r=t)),Object(c.n)(t,p.e,t=>n(4,o=t));let i,l,b="prompt",a=[],u=null,j=null,d=-1,O=[];function f(){n(0,b="prompt"),n(1,u=null),a=[]}function g(){j=document.querySelector("video"),Ne.a.setVideo(j),n(2,O=[]),n(0,b="play"),l&&l(),P=u,n(3,i=F(x.b));let t="";l=i.subscribe(e=>{!function(t){let e=t[t.length-1],c=O[O.length-1];!e||c&&e.text===c.text||n(2,O=[...O,e]);O.length>10&&n(2,O=O.slice(O.length-10))}(e);const c=e.map(t=>t.text||"").join("\n").trim();r&&c!==t&&c&&(t=c,GM_setClipboard(c,"text"))})}x.b.subscribe(t=>d=t),Object(s.c)(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||Ne.a.removePauser("define")});let t="",e="";setInterval(()=>{const n=document.querySelector("video").getAttribute("src");n&&n!==t&&(t=n,f());const c=document.querySelector(".video-title"),s=c?c.textContent:"";s!==e&&(e=s,x.g.set(s))},50)});return[b,u,O,i,o,f,g,function(t){n(1,u=t.detail.subtitles),0===u.subs.length?(console.log("subtitles object failed to parse: ",u),alert("No subtitles were able to be parsed from the selected subtitle file, verify nothing is wrong with the file. If it appears normal please submit a bug report with the episode and the subtitles file you used to the issue tracker (a link can be found in the tray on the right side of the video player)!"),n(0,b="cancelled")):t.detail.skipAlignment?(x.b.set(0),g()):n(0,b="align")},function(t){t.detail?Ne.a.addPauser("tray"):Ne.a.removePauser("tray")},()=>n(0,b="cancelled"),()=>n(0,b="prompt"),()=>n(0,b="align")]}class Be extends c.b{constructor(t){var e;super(),Te.getElementById("svelte-14avfc4-style")||((e=Object(c.A)("style")).id="svelte-14avfc4-style",e.textContent=".subtitles-app.svelte-14avfc4{position:relative}.subtitles-app.svelte-14avfc4>*{z-index:1000000000}",Object(c.g)(Te.head,e)),Object(c.I)(this,t,He,Ge,c.W,{})}}var We=Be,Ve=n(24),De=n.n(Ve),Re=n(22),Ze={insert:"head",singleton:!1};De()(Re.a,Ze),Re.a.locals;const Ke=document.createElement("div");location.host.includes("crunchyroll")?document.getElementById("vilosRoot").appendChild(Ke):document.body.appendChild(Ke),Ke.id="sheodox-jimaku-player",Ke.style.position="fixed",Ke.style.width="100%",Ke.style.zIndex="999999999";new We({target:Ke})}]);
